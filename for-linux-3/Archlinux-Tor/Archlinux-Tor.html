<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.5.2.2 (Linux)"/>
	<meta name="created" content="2020-04-09T22:39:19"/>
	<meta name="changed" content="2023-09-09T23:43:28"/>
	<meta name="AppVersion" content="15.0000"/>
	<style type="text/css">
		@page { size: 21.59cm 27.94cm; margin: 2cm }
		p { color: #000000; line-height: 115%; text-align: left; orphans: 2; widows: 2; margin-bottom: 0.25cm; direction: ltr; background: transparent }
		p.western { font-family: "Liberation Serif", serif; font-size: 12pt; so-language: ru-RU }
		p.cjk { font-family: "AR PL New Sung"; font-size: 12pt; so-language: zh-CN }
		p.ctl { font-family: "DejaVu Sans"; font-size: 12pt; so-language: hi-IN }
		h1 { color: #000000; text-align: left; orphans: 2; widows: 2; margin-bottom: 0.21cm; direction: ltr; background: transparent; page-break-after: avoid }
		h1.western { font-family: "Liberation Serif", sans-serif; font-size: 24pt; so-language: ru-RU; font-weight: bold }
		h1.cjk { font-family: "AR PL New Sung"; font-size: 24pt; so-language: zh-CN; font-weight: bold }
		h1.ctl { font-family: "Noto Sans Devanagari"; font-size: 24pt; so-language: hi-IN; font-weight: bold }
		h2 { color: #000000; text-align: left; orphans: 2; widows: 2; margin-top: 0.35cm; margin-bottom: 0.21cm; direction: ltr; background: transparent; page-break-after: avoid }
		h2.western { font-family: "Liberation Serif", sans-serif; font-size: 18pt; so-language: ru-RU; font-weight: bold }
		h2.cjk { font-family: "AR PL New Sung"; font-size: 18pt; so-language: zh-CN; font-weight: bold }
		h2.ctl { font-family: "Noto Sans Devanagari"; font-size: 18pt; so-language: hi-IN; font-weight: bold }
		h3 { color: #000000; text-align: left; orphans: 2; widows: 2; margin-top: 0.25cm; margin-bottom: 0.21cm; direction: ltr; background: transparent; page-break-after: avoid }
		h3.western { font-family: "Liberation Serif", sans-serif; font-size: 14pt; so-language: ru-RU; font-weight: bold }
		h3.cjk { font-family: "AR PL New Sung"; font-size: 14pt; so-language: zh-CN; font-weight: bold }
		h3.ctl { font-family: "Noto Sans Devanagari"; font-size: 14pt; so-language: hi-IN; font-weight: bold }
		h4 { color: #000000; text-align: left; orphans: 2; widows: 2; margin-top: 0.21cm; margin-bottom: 0.21cm; direction: ltr; background: transparent; page-break-after: avoid }
		h4.western { font-family: "Liberation Serif", sans-serif; font-size: 12pt; so-language: ru-RU; font-weight: bold }
		h4.cjk { font-family: "AR PL New Sung"; font-size: 12pt; so-language: zh-CN; font-weight: bold }
		h4.ctl { font-family: "Noto Sans Devanagari"; font-size: 12pt; so-language: hi-IN; font-weight: bold }
		h5 { color: #000000; text-align: left; orphans: 2; widows: 2; margin-top: 0.21cm; margin-bottom: 0.11cm; direction: ltr; background: transparent; page-break-after: avoid }
		h5.western { font-family: "Liberation Serif", sans-serif; font-size: 10pt; so-language: ru-RU; font-weight: bold }
		h5.cjk { font-family: "AR PL New Sung"; font-size: 10pt; so-language: zh-CN; font-weight: bold }
		h5.ctl { font-family: "Noto Sans Devanagari"; font-size: 10pt; so-language: hi-IN; font-weight: bold }
		h6 { color: #000000; text-align: left; orphans: 2; widows: 2; margin-top: 0.11cm; margin-bottom: 0.11cm; direction: ltr; background: transparent; page-break-after: avoid }
		h6.western { font-family: "Liberation Serif", sans-serif; font-size: 7pt; so-language: ru-RU; font-weight: bold }
		h6.cjk { font-family: "AR PL New Sung"; font-size: 7pt; so-language: zh-CN; font-weight: bold }
		h6.ctl { font-family: "Noto Sans Devanagari"; font-size: 7pt; so-language: hi-IN; font-weight: bold }
		pre { color: #000000; text-align: left; orphans: 2; widows: 2; direction: ltr; background: transparent }
		pre.western { font-family: "Liberation Mono", serif; font-size: 10pt; so-language: ru-RU }
		pre.cjk { font-family: "Liberation Mono"; font-size: 10pt; so-language: zh-CN }
		pre.ctl { font-family: "Liberation Mono"; font-size: 10pt; so-language: hi-IN }
		a:link { color: #000080; text-decoration: underline }
		code.western { font-family: "Liberation Mono", serif }
		code.cjk { font-family: "Liberation Mono" }
		code.ctl { font-family: "Liberation Mono" }
	</style>
</head>
<body lang="ru-RU" text="#000000" link="#000080" vlink="#800000" dir="ltr"><h1 class="western" align="left">
<font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="font-weight: normal">Tor
(Русский)</span></font></font></font></h1>
<div id="TextSection" dir="ltr"><p class="western"><br/>
<br/>

	</p>
</div>
<div id="Раздел1" dir="ltr">
	<ul><li><p class="western" style="margin-right: 0.21cm; margin-bottom: 0cm">
		<span style="display: inline-block; border: 1px solid #000000; padding: 0.18cm"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><font color="#0077bb"><span style="text-decoration: none"><span style="font-weight: normal"><font color="#000080">Page</span></span></span></font></a></font></p>
		<li><p class="western" style="margin-right: 0.21cm; margin-bottom: 0cm"><a name="ca-talk"></a>
		<span style="display: inline-block; border: 1px solid #000000; padding: 0.18cm"><a href="https://wiki.archlinux.org/index.php?title=Talk:Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit&amp;redlink=1"><font color="#0077bb"><span style="text-decoration: none"><span style="font-weight: normal"><font color="#000080">Discussion</span></span></span></font></a></font></p>
	</ul>
</div>
<div id="Раздел2" dir="ltr"><p class="western"><br/>
<br/>

	</p>
</div>
<div id="Раздел3" dir="ltr">
	<ul><li><p class="western" style="margin-right: 0.21cm; margin-bottom: 0cm">
		<span style="display: inline-block; border: 1px solid #000000; padding: 0.18cm"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><font color="#0077bb"><span style="text-decoration: none"><span style="font-weight: normal"><font color="#000080">Read</span></span></span></font></a></font></p>
		<li><p class="western" style="margin-right: 0.21cm; margin-bottom: 0cm"><a name="ca-viewsource"></a>
		<span style="display: inline-block; border: 1px solid #000000; padding: 0.18cm"><a href="https://wiki.archlinux.org/index.php?title=Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit"><font color="#0077bb"><span style="text-decoration: none"><span style="font-weight: normal"><font color="#000080">View
		source</span></span></span></font></a></font></p>
		<li><p class="western" style="margin-right: 0.21cm; margin-bottom: 0cm"><a name="ca-history"></a>
		<span style="display: inline-block; border: 1px solid #000000; padding: 0.18cm"><a href="https://wiki.archlinux.org/index.php?title=Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history"><font color="#0077bb"><span style="text-decoration: none"><span style="font-weight: normal"><font color="#000080">View
		history</span></span></span></font></a></font></p>
	</ul>
</div>
<div id="Раздел4" dir="ltr"><p class="western" style="line-height: 160%; orphans: 2; widows: 2">
	<br/>
<br/>

	</p>
</div>
<div id="Раздел5" dir="ltr"><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<b><span lang="ru-RU"><span style="background: #ddddff">Состояние
	перевода:</span></span></b><span lang="ru-RU"><span style="background: #ddddff">
	На этой странице представлен перевод
	статьи </span></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor"><font color="#0077bb"><span style="text-decoration: none"><span lang="ru-RU"><b><span style="background: #ddddff">Tor</span></b></span></span></font></a></font><span lang="ru-RU"><span style="background: #ddddff">.
	Дата последней синхронизации: 11 июля
	2021. Вы можете </span></span><font color="#000080"><a href="https://wiki.archlinux.org/title/ArchWiki:Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><font color="#0077bb"><span style="text-decoration: none"><span lang="ru-RU"><b><span style="background: #ddddff">помочь</span></b></span></span></font></a></font><span lang="ru-RU"><span style="background: #ddddff">
	синхронизировать перевод, если в
	английской версии произошли </span></span><font color="#000080"><a href="https://wiki.archlinux.org/index.php?title=Tor&amp;diff=0&amp;oldid=683471"><font color="#0077bb"><span style="text-decoration: none"><span lang="ru-RU"><b><span style="background: #ddddff">изменения</span></b></span></span></font></a></font><span lang="ru-RU"><span style="background: #ddddff">.</span></span><img src="Archlinux-Tor_html_285c3391c296953c.gif" name="Фигура1" alt="Фигура1" align="right" width="235" height="83"/>
<span id="Врезка1" dir="ltr" style="float: right; width: 6.22cm; border: none; padding: 0cm; background: #ffffff"><p class="western" align="center" style="margin-bottom: 0cm; border-top: none; border-bottom: 3.75pt solid #0088cc; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm; background: #333333">
		<font color="#ffffff"><b>Ссылки по теме</b></font></p>
		<ul>
			<li><p class="western" style="line-height: 100%; margin-bottom: 0cm">
			<font color="#000080"><a href="https://wiki.archlinux.org/title/GNUnet"><font color="#0077bb"><span style="text-decoration: none"><b>GNUnet</b></span></font></a></font></p>
			<li><p class="western" style="line-height: 100%; margin-bottom: 0cm">
			<font color="#000080"><a href="https://wiki.archlinux.org/title/I2P_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><font color="#0077bb"><span style="text-decoration: none"><b>I2P
			(Русский)</b></span></font></a></font></p>
			<li><p class="western" style="line-height: 100%; margin-bottom: 0cm">
			<font color="#000080"><a href="https://wiki.archlinux.org/title/Freenet"><font color="#0077bb"><span style="text-decoration: none"><b>Freenet</b></span></font></a></font></p>
		</ul>
	</span>
	</p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://www.torproject.org/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Tor
	Project</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">T</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">he
	</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">o</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">nion
	</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">r</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">outing)
	— открытая реализация </span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:%D0%9B%D1%83%D0%BA%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">луковой
	маршрутизации</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	предоставляющая доступ к анонимной
	прокси-сети. Основная цель — сохранить
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:%D0%90%D0%BD%D0%BE%D0%BD%D0%B8%D0%BC%D0%BD%D0%BE%D1%81%D1%82%D1%8C#.D0.98.D0.BD.D1.82.D0.B5.D1.80.D0.BD.D0.B5.D1.82_.D0.B8_.D0.90.D0.BD.D0.BE.D0.BD.D0.B8.D0.BC.D0.BD.D0.BE.D1.81.D1.82.D1.8C"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">анонимность</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	пользователя в интернете, обеспечив
	защиту от </span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:%D0%90%D1%82%D0%B0%D0%BA%D0%B0_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0_%D1%82%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">анализа
	трафика</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Пользователи
	сети Tor запускают на своих машинах
	&quot;луковый прокси&quot; (onion proxy), который
	предоставляет программам-клиентам
	SOCKS-интерфейс. Прокси подключается к
	сети Tor, периодически согласовывая
	виртуальный канал через неё. Tor использует
	многослойную криптографию (отсюда
	&quot;луковые&quot; аналогии), последовательно
	обеспечивая секретность на каждом
	промежуточном маршрутизаторе.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	процессе работы луковый прокси управляет
	сетевым трафиком, обеспечивая анонимность
	конечного пользователя. Трафик
	зашифровывается, пересылается через
	узлы сети Tor и дешифруется на последнем
	узле перед отправкой на целевой сервер.
	Цена обеспечения анонимности — низкая
	скорость работы по сравнению с обычным
	прямым соединением из-за большого
	количества перенаправлений трафика.
	Кроме того, хотя Tor обеспечивает защиту
	от анализа трафика, невозможно избежать
	подтверждения трафика на границах сети
	Tor (т.е. в точках входа и выхода из сети).
	Подробнее см. </span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:Tor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Wikipedia:ru:Tor</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	Сам по себе Tor </span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #ddddff">не</span></b></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	обеспечивает полную анонимность.
	Существует целый ряд проблем и возможных
	ошибок (см. </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://en.calameo.com/read/005242387ef11d44d4ae7"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Want
	Tor To Really Work?</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">).</span></span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Установка"></a><a name=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Установка</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Установите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	пакет </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=tor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">tor</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Как
	правило, с его помощью осуществляется
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%92%D0%B5%D0%B1-%D1%81%D1%91%D1%80%D1%84%D0%B8%D0%BD%D0%B3"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Веб-сёрфинг</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Nyx</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	— консольная утилита для мониторинга
	Tor. Позволяет отслеживать использование
	пропускной способности, детали
	соединений, а также редактировать
	настройки &quot;на лету&quot;. Для его
	использования </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>установите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	пакет </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=nyx"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">nyx</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Использование"></a><a name=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Использование</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%97%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5/%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Запустите/включите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	службу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	В качестве альтернативы можно запустить
	Tor командой </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">sudo
	-u tor /usr/bin/tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	программа работала через Tor, настройте
	её использовать </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">127.0.0.1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	или </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">localhost</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в качестве SOCKS5-прокси на порте 9050 (для
	Tor со стандартными настройками).</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Прокси
	позволяет удалённо выполнять разрешение
	доменных имён: используйте
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">socks5</span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #ebf1f5"><code class="western">h</span></b></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">://localhost:9050</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для отправки DNS-запросов с выходного
	узла (вместо </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">socks5</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для локальных запросов).</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 100%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Проверить
	работу Tor можно на странице
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://check.torproject.org/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">https://check.torproject.org/</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	или </span></span></span></span></font></font></span><font color="#000080"><a href="https://torcheck.xenobite.eu/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">https://torcheck.xenobite.eu/</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[</span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">устаревшая
	ссылка</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	2023-07-30 ⓘ].</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Настройка"></a><a name=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Настройка</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">По
	умолчанию Tor считывает настройки из
	файла </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/etc/tor/torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	или, если последний не обнаружен, из
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">$HOME/.torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Настройки объясняются в руководстве
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://man.archlinux.org/man/tor.1"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">tor(1)</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и на </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.torproject.org/docs/tor-manual.html.en"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">сайте
	Tor</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Настройки по умолчанию должны работать
	для большинства пользователей.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">После
	изменения настроек службу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	необходимо </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%9F%D0%B5%D1%80%D0%B5%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>перезагрузить</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Настройка_Tor_Relay"></a><a name=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0. Копия 1"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Настройка
	Tor Relay</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Максимальное
	количество дескрипторов файлов,
	одновременно открытых Tor, задаётся
	параметром </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">LimitNOFILE</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Для быстрых ретрансляторов имеет смысл
	увеличить это значение.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	на вашей системе не запущен веб-сервер
	и вы не задавали значение </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">AccountingMax</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(определяет максимальный объём
	передаваемых данных), рассмотрите
	возможность установки параметра </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ORPort</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в значение </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">443</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и/или </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DirPort</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в значение </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">80</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Многие пользователи Tor находятся за
	жёсткими межсетевыми экранами, которые
	разрешают им только веб-сёрфинг, и такая
	настройка позволит им использовать
	ваш ретранслятор. Если порты </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">80</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">443</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	уже заняты, то подойдут </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">22</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">110</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">143</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">9001</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://trac.torproject.org/projects/tor/wiki/TorRelayGuide#TorRelaySetup:InstallationandConfiguration"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[1]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Порты с номерами до 1024 являются системными
	и при работе через них Tor должен быть
	запущен с привилегиями суперпользователя;
	задайте параметры </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">User=root</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">User
	tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в файлах </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	соответственно.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Также
	будет полезно прочитать статью о
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://blog.torproject.org/blog/lifecycle-of-a-new-relay"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">жизненном
	цикле</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	ретрансляторов в документации Tor.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Tor_ControlPort"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Tor
	ControlPort</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Как
	правило, особой необходимости открывать
	</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">ControlPort</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	не возникает, но некоторым программам
	это может потребоваться для получения
	низкоуровневого доступа к узлу.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Через
	открытый ControlPort внешние приложения
	смогут отслеживать состояние вашего
	узла, корректировать настройки, а также
	получать информацию о состоянии сети
	Tor и виртуальных каналов.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Добавьте
	следующую строку в файл </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ControlPort 9051</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Разумеется,
	доступ к ControlPort должен предоставляться
	только доверенным пользователям.
	Ограничение доступа осуществляется
	либо с помощью cookie-файла, либо паролем,
	либо обоими способами одновременно.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Cookie-файл_Tor_Control"></a><a name="Cookie-.D1.84.D0.B0.D0.B9.D0.BB_Tor_Cont"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Cookie-файл
	Tor Control</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Добавьте
	к файлу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	следующие строки:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">CookieAuthentication 1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">CookieAuthFile /var/lib/tor/control_auth_cookie</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">CookieAuthFileGroupReadable 1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DataDirectoryGroupReadable 1</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Доступ
	к ControlPort будет ограничен набором файловых
	разрешений cookie-файла и каталога data.
	Доступ к cookie-файлу Tor Control получат все
	пользователи группы </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Добавьте
	пользователя в группу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># usermod -a -G tor </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">пользователь</span></i></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Перезагрузите
	настройки группы:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ newgrp tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%9F%D0%B5%D1%80%D0%B5%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Перезапустите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	Tor:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># systemctl restart tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Теперь
	</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">пользователь</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	имеет доступ к файлу сookie. Команда</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ stat -c%a /var/lib/tor /var/lib/tor/control_auth_cookie</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">должна
	вывести значения </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">750</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">640</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Пароль_Tor_Control"></a><a name=".D0.9F.D0.B0.D1.80.D0.BE.D0.BB.D1.8C_Tor"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Пароль
	Tor Control</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Преобразуйте
	пароль из представления в виде открытого
	текста в хэш:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># set +o history                          # отключить историю команд bash</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># tor --hash-password </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">пароль</span></i></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># set -o history                          # включить историю команд bash</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Добавьте
	этот хэш к файлу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">HashedControlPassword </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">хэш</span></i></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Команда
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">set
	+o history</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	отключает сохранение истории в файл
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">$HISTFILE</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	чтобы при выполнении команды </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor
	--hash-password</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в нём не сохранилось значение пароля
	открытым текстом.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Tor_ControlSocket"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Tor
	ControlSocket</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Tor
	ControlSocket имеет примерно то же назначение,
	что и </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Tor_ControlPort"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Tor
	ControlPort</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	с той лишь разницей, что прослушивается
	не TCP-сокет, а </span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%BE%D0%BA%D0%B5%D1%82_%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD%D0%B0_Unix"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">сокет
	домена</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	Unix.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	какой-то программе нужен доступ к Tor
	ControlSocket, добавьте следующие строки к
	файлу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ControlSocket /var/lib/tor/control_socket</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ControlSocketsGroupWritable 1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DataDirectoryGroupReadable 1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">CacheDirectoryGroupReadable 1             # обходное решение для бага #26913</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Добавьте
	запускающего программу пользователя
	в группу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># usermod -a -G tor </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">пользователь</span></i></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Перезагрузите
	настройки группы:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ newgrp tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Затем
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%9F%D0%B5%D1%80%D0%B5%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>перезапустите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	Tor</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># systemctl restart tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">и
	перезапустите программу.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	проверить состояние контрольного
	сокета, выполните</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># stat -c%a /var/lib/tor /var/lib/tor/control_socket</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Команда
	должна вывести значения </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">750</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">660</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Проверка_Tor_Control"></a><a name=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Проверка
	Tor Control</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	проверить настройки ControlPort, используйте
	входящую в пакет </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=gnu-netcat"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">gnu-netcat</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	утилиту </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">nc</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ echo -e 'PROTOCOLINFO\r\n' | nc 127.0.0.1 9051</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Также
	запустите </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=socat"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">socat</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ echo -e 'PROTOCOLINFO\r\n' | sudo -u </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">пользователь</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"> socat - UNIX-CLIENT:/var/lib/tor/control_socket</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Обе
	команды должны вывести</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">250-PROTOCOLINFO 1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">250-AUTH METHODS=COOKIE,SAFECOOKIE,HASHEDPASSWORD COOKIEFILE=&quot;/var/lib/tor/control_auth_cookie&quot;</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">250-VERSION Tor=&quot;0.3.4.8&quot;</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">250 OK</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">514 Authentication required.</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Дополнительную
	информацию можно найти в описании
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://gitweb.torproject.org/torspec.git/tree/control-spec.txt"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">протокола
	Tor Control</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Запуск_Tor_в_Chroot"></a><a name=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_Tor"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Запуск
	Tor в Chroot</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ffdddd">Важно:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ffdddd">
	Подключение по telnet на локальный
	ControlPort окажется невозможным, если Tor
	был запущен в chroot.</span></span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">По
	соображениям безопасности желательно
	запускать Tor в </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Chroot_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>chroot</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Следующий скрипт создаст подходящее
	окружение chroot в каталоге </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/opt/torchroot</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">~/torchroot-setup.sh</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">#!/bin/sh</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">export TORCHROOT=/opt/torchroot</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT/etc/tor</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT/dev</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT/usr/bin</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT/usr/lib</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT/usr/share/tor</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT/var/lib</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mkdir -p $TORCHROOT/var/log/tor/</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ln -s /usr/lib  $TORCHROOT/lib</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /etc/hosts           $TORCHROOT/etc/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /etc/host.conf       $TORCHROOT/etc/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /etc/localtime       $TORCHROOT/etc/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /etc/nsswitch.conf   $TORCHROOT/etc/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /etc/resolv.conf     $TORCHROOT/etc/</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /usr/bin/tor         $TORCHROOT/usr/bin/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /usr/share/tor/geoip* $TORCHROOT/usr/share/tor/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /lib/libnss* /lib/libnsl* /lib/ld-linux-*.so* /lib/libresolv* /lib/libgcc_s.so* $TORCHROOT/usr/lib/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp $(ldd /usr/bin/tor | awk '{print $3}'|grep --color=never &quot;^/&quot;) $TORCHROOT/usr/lib/</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">## /var/log/tor/notices.log необходим только в том случае, если вы запускаете hidden service</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># cp /var/log/tor/notices.log $TORCHROOT/var/log/tor/</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp -r /var/lib/tor      $TORCHROOT/var/lib/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /etc/tor/torrc       $TORCHROOT/etc/tor/</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">chown tor:tor $TORCHROOT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">chmod 700 $TORCHROOT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">chown -R tor:tor $TORCHROOT/var/lib/tor</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">chown -R tor:tor $TORCHROOT/var/log/tor</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">sh -c &quot;grep --color=never ^tor /etc/passwd &gt; $TORCHROOT/etc/passwd&quot;</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">sh -c &quot;grep --color=never ^tor /etc/group &gt; $TORCHROOT/etc/group&quot;</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mknod -m 644 $TORCHROOT/dev/random c 1 8</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mknod -m 644 $TORCHROOT/dev/urandom c 1 9</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">mknod -m 666 $TORCHROOT/dev/null c 1 3</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">if [ &quot;$(uname -m)&quot; = &quot;x86_64&quot; ]; then</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">  </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">cp /usr/lib/ld-linux-x86-64.so* $TORCHROOT/usr/lib/.</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">  </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ln -sr /usr/lib64 $TORCHROOT/lib64</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">  </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ln -s $TORCHROOT/usr/lib ${TORCHROOT}/usr/lib64</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">fi</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Выполнив
	скрипт от пользователя root, вы можете
	запустить Tor в окружении chroot командой:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># chroot --userspec=tor:tor /opt/torchroot /usr/bin/tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Или
	же, если вы используете systemd, то можете
	создать </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Drop-in_%D1%84%D0%B0%D0%B9%D0%BB"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>drop-in
	файл</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для службы </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/systemd/system/tor.service.d/chroot.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[Service]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">User=root</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ExecStart=</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ExecStart=/usr/bin/sh -c &quot;chroot --userspec=tor:tor /opt/torchroot /usr/bin/tor -f /etc/tor/torrc&quot;</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">KillSignal=SIGINT</span></span></span></span></font></font></span></pre><h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm">
	<a name="Запуск_Tor_в_контейнере_systemd-nspawn"></a><a name=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_Tor Копия 1"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Запуск
	Tor в контейнере systemd-nspawn</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	этом примере мы создадим контейнер
	systemd-nspawn с виртуальным сетевым
	macvlan-интерфейсом. Контейнер будет
	называться </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor-exit</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	статьях </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-nspawn"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>systemd-nspawn</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-networkd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>systemd-networkd</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	можно найти полную информацию о работе
	и настройке соответствующих программ.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0. Копия 1"></a><a name="Установка_и_настройка_хоста"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Установка
	и настройка хоста</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Контейнер
	будет размещаться в каталоге
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/srv/container</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># mkdir -p /srv/container/tor-exit</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Установите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	пакет </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=arch-install-scripts"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">arch-install-scripts</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	чтобы получить доступ к утилите </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">pacstrap</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">С
	помощью </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">pacstrap</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	установите в каталог контейнера пакеты
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=base"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">base</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=tor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">tor</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=nyx"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">nyx</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(подробнее см. статью об </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-nspawn#Create_and_boot_a_minimal_Arch_Linux_container"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>установке
	Arch Linux в контейнер</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">):</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># pacstrap -сi /srv/container/tor-exit base tor nyx</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	зарегистрировать контейнер на хосте,
	то в дальнейшем с ним можно будет
	взаимодействовать извне с помощью
	команды </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">machinectl</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Для этого необходимо создать символическую
	ссылку на контейнер в каталоге
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/var/lib/container/</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Создайте каталог, если он отсутствует:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># mkdir -p /var/lib/container</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">и
	поместите в него символическую ссылку
	на контейнер (см. </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-nspawn#Management"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>systemd-nspawn#Management</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">):</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># ln -s /srv/container/tor-exit /var/lib/container/tor-exit</span></span></span></span></font></font></span></pre><h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
	<a name="Виртуальный_сетевой_интерфейс"></a><a name=".D0.92.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Виртуальный
	сетевой интерфейс</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Создайте
	drop-in-файл настроек контейнера:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/systemd/nspawn/tor-exit.nspawn</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[Service]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">MACVLAN=</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">интерфейс</span></i></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[Exec]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">LimitNOFILE=32768</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Опция
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">MACVLAN=</span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">интерфейс</span></span></span></i></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	создаёт macvlan-интерфейс с названием
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">mv-</span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">интерфейс</span></span></span></i></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и привязывает его к контейнеру, подробнее
	см. </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-nspawn#Use_a_%22macvlan%22_or_%22ipvlan%22_interface"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>systemd-nspawn#Use
	a &quot;macvlan&quot; or &quot;ipvlan&quot; interface</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Это полезно с точки зрения безопасности,
	поскольку контейнеру можно назначить
	приватный IP-адрес, а настоящий адрес
	машины из контейнера виден не будет.
	Так можно, например, скрыть DNS-запросы.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Опция
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">LimitNOFILE=32768</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	позволит открывать большее </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%9A%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Количество
	соединений</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	одновременно.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Наконец,
	сохраните сетевые настройки
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-networkd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>systemd-networkd</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в файле
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/srv/container/tor-exit/etc/systemd/network/mv-</span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">интерфейс</span></span></i></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">.network</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Запуск_и_включение_systemd-nspawn"></a><a name=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Запуск
	и включение systemd-nspawn</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%97%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5/%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Запустите/включите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	службу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">systemd-nspawn@tor-exit.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Настройка_контейнера"></a><a name=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0. Копия 2"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Настройка
	контейнера</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	войти в контейнер, выполните (см.
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-nspawn#machinectl"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>systemd-nspawn#machinectl</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">):</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># machinectl login tor-exit</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	выполнить вход не удаётся, см.
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd-nspawn#Root_login_fails"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>systemd-nspawn#Root
	login fails</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Запуск_и_включение_systemd-networkd"></a><a name=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0 Копия 1"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Запуск
	и включение systemd-networkd</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%97%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5/%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Запустите/включите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	службу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">systemd-networkd.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Команда </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">networkctl</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	отобразит список сетевых интерфейсов
	контейнера, если </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">systemd-networkd</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	настроен корректно.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Настройка_Tor"></a><a name=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0. Копия 3"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Настройка
	Tor</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Смотри
	раздел </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0_Tor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Запуск
	сервера Tor</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddffdd">Совет:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddffdd">
	Файлы контейнера удобнее редактировать
	с хоста, вашим любимым редактором.</span></span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name=".D0.92.D0.B5.D0.B1-.D1.81.D1.91.D1.80.D1"></a><a name="Веб-сёрфинг"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Веб-сёрфинг</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 100%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Единственный
	способ оставаться анонимным при
	просмотре страниц в интернете —
	использовать </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Tor
	Browser Bundle</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	который использует пропатченную версию
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Firefox_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Firefox</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Его можно установить с пакетом
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=torbrowser-launcher"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">torbrowser-launcher</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	или </span></span></span></span></font></font></span><font color="#000080"><a href="https://aur.archlinux.org/packages/tor-browser/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">tor-browser</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 10pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">AUR</span></span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Также
	можно использовать Tor с обычными
	браузерами: в разделах </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Firefox"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Firefox</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Chromium"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Chromium</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	объясняется, как настроить их на работу
	через Tor. Обратите внимание, что даже в
	режиме приватного просмотра это не
	гарантирует анонимности: отпечатки,
	плагины, DNS-утечки и прочие дефекты
	могут стать причиной разглашения вашего
	IP-адреса или личности </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.torproject.org/docs/faq.html.en#TBBOtherBrowser"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[2]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddffdd">Совет:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddffdd">
	Чтобы makepkg мог проверить подпись
	загруженного из AUR tar-архива с исходниками
	</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ddffdd">Tor
	Browser</span></span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddffdd">,
	импортируйте </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://www.torproject.org/docs/signing-keys.html.en"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">ключи
	подписей Tor Project</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddffdd">
	по инструкции из статьи </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/GnuPG#Use_a_keyserver"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #ddffdd">GnuPG#Use
	a keyserver</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddffdd">.</span></span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Firefox"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Firefox</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Preferences
	&gt; General &gt; Network Settings &gt; Settings...</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	, выберите пункт </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Manual
	proxy configuration</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	после чего укажите: SOCKS Host </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">localhost</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	на порте </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">9050</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(SOCKS v5). Чтобы перенаправить все DNS-запросы
	в сеть Tor, выберите пункт </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Proxy
	DNS when using SOCKS v5</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Chromium"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Chromium</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Запустите
	Chromium:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ chromium --proxy-server=&quot;socks5://</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">мой-прокси</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:8080&quot; --host-resolver-rules=&quot;MAP * ~NOTFOUND , EXCLUDE </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">мой-прокси</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">&quot;</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Флаг
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--proxy-server=&quot;socks5://</span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">мой-прокси</span></span></i></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">:8080&quot;</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	означает, что все </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">http://</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">https://</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	запросы будут посылаться через
	прокси-сервер </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">&quot;</span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">мой-прокси</span></span></i></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">:8080&quot;</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	посредством протокола SOCKS пятой версии.
	Разрешение имён для этих запросов будет
	выполняться прокси-сервером, а не
	браузером локально.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	Проксирование </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ftp://</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	через SOCKS-прокси на данный момент не
	реализовано </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://www.chromium.org/developers/design-documents/network-stack/socks-proxy"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[3]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">.</span></span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Флаг
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--proxy-server</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	влияет только на загрузку URL-страниц.
	Однако в Chromium есть и другие компоненты,
	которые могут попытаться выполнить
	DNS-разрешение напрямую. Наиболее важный
	их этих компонентов — </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">DNS-prefetcher</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Если DNS-prefetcher не отключён, то браузер
	будет посылать DNS-запросы напрямую,
	минуя SOCKS5-сервер. Prefetcher и другие
	компоненты можно отключить, но такой
	подход неудобен и ненадёжен, поскольку
	придётся отслеживать каждый элемент
	Chromium, который может захотеть посылать
	DNS-запросы самостоятельно.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Для
	комплексного решения этой проблемы
	используется флаг </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--host-resolver-rules=&quot;MAP
	* ~NOTFOUND , EXCLUDE </span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">мой-прокси</span></span></i></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">&quot;</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	который представляет собой ловушку
	для посылаемых через обычную сеть
	DNS-запросов. Каждое выполяемое локально
	разрешение DNS теперь будет привязано
	к (нерабочему) адресу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">~NOTFOUND</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(можно представить его как адрес
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">0.0.0.0</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">).
	Указание </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">&quot;EXCLUDE&quot;</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	создаёт исключение для прокси-сервера
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">&quot;</span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">мой-прокси</span></span></i></span></span></font></font></span></code><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">&quot;</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	потому что без этого Chromium не сможет
	выполнять разрешение адреса самого
	прокси-сервера SOCKS и все запросы будут
	завершаться неудачей с ответом
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">PROXY_CONNECTION_FAILED</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Также,
	чтобы предотвратить </span></span></span></span></font></font></span><font color="#000080"><a href="https://ipleak.net/#webrtcleak"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">утечки
	WebRTC</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	можно установить расширение браузера
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://chrome.google.com/webstore/detail/webrtc-network-limiter/npeicpdbkakmehahjeeohfdhnlpdklia"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">WebRTC
	Network Limiter</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Отладка"></a><a name=".D0.9E.D1.82.D0.BB.D0.B0.D0.B4.D0.BA.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Отладка</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	случае возникновения каких-либо проблем
	в первую очередь нужно проверить
	настройки прокси, введя адрес
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">chrome://net-internals/#proxy</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Затем
	нужно изучить вкладку настроек DNS, чтобы
	убедиться, что Chromium не выполняет
	локальное разрешение DNS:
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">chrome://net-internals/#dns</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Расширения"></a><a name=".D0.A0.D0.B0.D1.81.D1.88.D0.B8.D1.80.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Расширения</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Как
	и для Firefox, вы можете установить удобный
	переключатель прокси вроде </span></span></span></span></font></font></span><font color="#000080"><a href="https://chrome.google.com/webstore/detail/dpplabbmogkhghncfbfdeeokoefdjegm"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Proxy
	SwitchySharp</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">После
	установки перейдите на его панель
	настроек. Под вкладкой </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Proxy
	Profiles</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	добавьте новый профиль </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Tor</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	уберите отметку с опции </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Use
	the same proxy server for all protocols</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	затем добавьте </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">localhost</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в качестве хоста SOCKS, порт </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">9050</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	и выберите </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">SOCKS
	v5</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">При
	желании можно включить опцию быстрого
	переключения на вкладке настроек
	</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">General</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Тогда переключаться между нормальной
	навигацией и сетью Tor можно будет одним
	кликом на иконке Proxy SwitchySharp.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Luakit"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Luakit</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	Вас будет легко опознать по редкой
	строке </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">user-agent</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">;
	также могут возникнуть проблемы с
	Flash, JavaScript и т.д.</span></span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Выполните:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ torsocks luakit</span></span></span></span></font></font></span></pre><h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm">
	<a name="HTTP-прокси"></a><a name="HTTP-.D0.BF.D1.80.D0.BE.D0.BA.D1.81.D0.B"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">HTTP-прокси</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	Tor может работать через встроенный
	туннелированный HTTP-прокси или сторонний
	прокси вроде </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Privoxy"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Privoxy</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Тем не менее, разработчики Tor рекомендуют
	использовать библиотеку SOCKS5, если ваш
	браузер её поддерживает.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Tor"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Tor</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Добавьте
	следующую строку в файл </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	чтобы использовать порт </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">8118</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	на </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">localhost</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в качестве http-прокси:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">HTTPTunnelPort 127.0.0.1:8118</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Подробнее
	смотрите </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.torproject.org/docs/tor-manual.html.en#HTTPTunnelPort"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">руководство
	Tor</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Firefox_2"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Firefox</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Расширение
	браузера </span></span></span></span></font></font></span><font color="#000080"><a href="https://addons.mozilla.org/firefox/addon/foxyproxy-standard/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">FoxyProxy</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	позволяет назначить прокси-сервер как
	для всех HTTP-запросов в целом, так и для
	обращения по отдельным веб-адресам.
	После установки расширения перезапустите
	браузер и вручную настройте использование
	прокси по адресу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">localhost:8118</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	где должен работать </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Privoxy"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Privoxy</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Эти настройки находятся в меню </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Add
	&gt; Standard proxy type</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Выберите метку прокси-сервера (например,
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">Tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">)
	и введите хост и порт в поля </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">HTTP
	Proxy</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">SSL
	Proxy</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Для проверки правильности работы Tor
	посетите страницу </span></span></span></span></font></font></span><font color="#000080"><a href="https://check.torproject.org/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Tor
	Check</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Privoxy"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Privoxy</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Privoxy
	можно использовать для обмена сообщениями
	(</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Jabber"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Jabber</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/IRC"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>IRC</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">)
	и других приложений. Приложения, которые
	поддерживают HTTP-прокси, можно подключить
	к Privoxy (например, на адрес </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">127.0.0.1:8118</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">).
	Чтобы использовать SOCKS-прокси, направьте
	ваше приложение в Tor (адрес </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">127.0.0.1:9050</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">).
	Следует иметь в виду, что приложение
	может самостоятельно выполнять
	DNS-разрешение, что приведет к утечке
	информации. В этом случае можно
	попробовать использовать SOCKS4A (например,
	с Privoxy).</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name=".D0.9E.D0.B1.D0.BC.D0.B5.D0.BD_.D0.BC.D0"></a><a name="Обмен_мгновенными_сообщениями"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Обмен
	мгновенными сообщениями</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Для
	использования мессенджера через Tor не
	нужен HTTP-прокси вроде </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Privoxy"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Privoxy</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Мы используем напрямую демон Tor, по
	умолчанию прослушивающий порт 9050.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Pidgin"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Pidgin</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/Pidgin"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Pidgin</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	можно настроить на работу через Tor
	глобально или для отдельных аккаунтов.
	Для глобальных настроек используйте
	пункт меню </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Tools
	-&gt; Preferences -&gt; Proxy</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Чтобы настроить использование Tor для
	одного аккаунта, перейдите в </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Accounts
	&gt; Manage Accounts</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	выберите нужный аккаунт, нажмите </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Modify</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	после чего на вкладке </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Proxy</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	укажите следующие параметры:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Proxy type SOCKS5</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Host 127.0.0.1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Port 9150</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Заметьте,
	что </span></span></span></span></font></font></span><font color="#000080"><a href="https://trac.torproject.org/projects/tor/ticket/8135"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">в
	2013 году</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	значение Port для Tor Browser Bundle изменилось
	с 9050 на 9150. Если вы получили ошибку
	</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">Connection
	refused</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	попробуйте изменить номер порта на
	прежний.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Irssi"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Irssi</b></span></span></span></font></font></font></span></h3>
	<p class="western" align="center" style="line-height: 160%; orphans: 2; widows: 2; margin-bottom: 0cm">
	<a href="https://wiki.archlinux.org/title/File:Tango-view-refresh-red.png">
  <img src="Archlinux-Tor_html_866681185290b733.png" name="Изображение1" align="bottom" width="50" height="50" border="0"/>
</a>
<span style="display: inline-block; border: 1px solid #d7dfe3; padding: 0.04cm"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #f9faff"><span style="font-variant: normal">This
	article or section is out of date.</span></span></b></span></span></span></font></font></span><a href="https://wiki.archlinux.org/title/File:Tango-view-refresh-red.png">
  <img src="Archlinux-Tor_html_866681185290b733.png" name="Изображение2" align="bottom" width="50" height="50" border="0"/>
</a>
</p>
	<p class="western" align="center" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #f9faff">Reason:</span></b></span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #f9faff">
	</span></span></span></span></span></font></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">cap_sasl.pl</span></span></span></span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #f9faff">
	сломался с обновлением </span></span></span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal"><span style="background: #f9faff">perl</span></span></i></span></span></font></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #f9faff">
	5.20; кроме того, SSL не работает с </span></span></span></span></span></font></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torsocks</span></span></span></span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #f9faff">.
	(Discuss in </span></span></span></span></span></font></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Talk:Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #f9faff">Talk:Tor
	(Русский)</span></b></span></span></span></font></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 9pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #f9faff">)</span></span></span></span></span></font></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Libera
	Chat рекомендует подключаться напрямую
	к </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">.onion</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Для этого также потребуется SASL для
	идентификации NickServ в процессе соединения;
	подробности можно найти в статье
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Irssi#Authenticating_with_SASL"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Irssi#Authenticating
	with SASL</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Запустите irssi:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ torsocks irssi</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Задайте
	ваши индентификационные данные для
	сервиса </span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:IRC-%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D1%8B"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">nickserv</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	которые будут считываться при создании
	соединения. Поддерживаются механизмы
	аутентификации ECDSA-NIST256P-CHALLENGE (см.
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://github.com/kaniini/ecdsatool/blob/master/example-for-cap_sasl.pl"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">ecdsatool</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">)
	и PLAIN. DH-BLOWFISH больше </span></span></span></span></font></font></span><font color="#000080"><a href="https://libera.chat/guides/sasl"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">не
	поддерживается</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/sasl set </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">сеть</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"> </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">имя-пользователя</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"> </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">пароль</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"> </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">механизм</span></i></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Отключите
	CTCP и DCC и задайте фальшивое имя хоста,
	чтобы чтобы скрыть настоящее:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/ignore * CTCPS</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/ignore * DCC</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/set hostname </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">фальшивый_хост</span></i></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Подключитесь
	к Libera Chat:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/connect -network </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">network</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"> libera75jm6of4wxpxt4aynol3xjmbtxgfyjpu34ss4d7r7q2v5zrpyd.onion</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Дополнительную
	информацию можно найти в статьях
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://libera.chat/guides/connect#accessing-liberachat-via-tor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Accessing
	Libera.Chat Via Tor</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://libera.chat/guides/sasl"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Using
	SASL</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><font color="#000080"><a href="https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO/IrcSilc"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">IRC/SILC
	Wiki article</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Pacman"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Pacman</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Через
	сеть Tor можно выполнять загрузочные
	операции </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>pacman</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	— синхронизировать базы данных
	репозиториев, скачивать пакеты и
	открытые ключи.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Преимущества:</span></span></span></span></font></font></span></p>
	<ul>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
		кто-то отслеживает Интернет-соединение
		вашей машины, то он не увидит выполняемые
		обновления. Соответственно, нельзя
		будет определить, какие пакеты
		установлены, какие из них устарели и
		как часто выполяется обновление. Но
		следует учитывать, что атакующий всё
		ещё может опознать используемое
		программное обеспечение и узнать его
		версию другими способами. Например,
		проанализировав исходящие пакеты
		вашего HTTP-сервера и просканировав его
		порт можно будет определить, что а) это
		работающий HTTP-сервер и б) его версию.</span></span></span></span></font></font></span></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
		зеркало для скачивания находится не
		в onion-домене, то скомпроментированный
		выходной узел может обнаружить попытку
		обновления и решить атаковать вашу
		машину. Однако при этом атакующий
		скорее всего не будет знать, какую
		именно машину он атакует.</span></span></span></span></font></font></span></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Атакующий
		может попытаться убедить вашу машину,
		что доступных обновлений нет, чтобы
		не позволить применить обновления
		безопасности. При обновлении через
		Tor сделать это будет крайне непросто,
		поскольку в анонимной сети почти
		невозможно определить конкретно вашу
		машину.</span></span></span></span></font></font></span></p>
	</ul>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Недостатки:</span></span></span></span></font></font></span></p>
	<ul>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Более
		длительное время обновления из-за
		высокого значения задержки и низкой
		пропускной способности сети Tor. Это
		может быть значительным недостатком
		с точки зрения безопасности, если
		обновление нужно выполнить как можно
		быстрее, особенно на машинах,
		непосредственно подключённых к сети
		Интернет. Например, если уязвимость
		серьёзная и её легко обнаружить и
		использовать, то злоумышленники часто
		стараются атаковать как можно больше
		уязвимых систем максимально быстро,
		чтобы успеть до применения обновлений
		безопасности.</span></span></span></span></font></font></span></p>
	</ul>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Надёжность
	обновлений через Tor:</span></span></span></span></font></font></span></p>
	<ul>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Не
		нужно использовать DNS.</span></span></span></span></font></font></span></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Вы
		зависите от состояния сети Tor и особенно
		выходных узлов (например, они могут
		блокировать обновления).</span></span></span></span></font></font></span></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Вы
		зависите от правильной работы демона
		Tor. Например, если на диске закончилось
		свободное место, то демон Tor может
		отказать работать. &quot;Reserved blocks gid:&quot;
		в ext4, квоты на использование дискового
		пространства и некоторые другие меры
		помогут решить эту проблему.</span></span></span></span></font></font></span></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
		вы находитесь в стране, где Tor блокируется,
		или в которой почти или совсем нет
		пользователей Tor, то вам придётся
		использовать мост (Tor bridge).</span></span></span></span></font></font></span></p>
	</ul>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Замечание
	по поводу gpg:</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Pacman
	считает надёжными только те ключи,
	которые подписаны либо лично вами
	(делается командой </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">pacman-key
	--lsign-key</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">),
	либо тремя из пяти мастер-ключей Arch.
	Если вредоносная выходная нода попробует
	заменить пакет на другой, подписаный
	её ключом, pacman не позволит пользователю
	установить такой пакет.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	Для других дистрибутивов на основе
	Arch, а также неофициальных репозиториев
	и AUR это утверждение может оказаться
	неверным.</span></span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/pacman.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">...</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">XferCommand = /usr/bin/curl --socks5-hostname localhost:9050 --continue-at - --fail --output %o %u</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">...</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	Во время обработки подписей баз данных
	иногда можно получить ошибку 404. Это
	зависит от </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Pacman/%D0%9F%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D1%8C_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_pacman"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #ddddff">настроек
	pacman</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	и как правило безвредно.</span></span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Java"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Java</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	заставить приложение Java </span></span></span></span></font></font></span><font color="#000080"><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">проксировать</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	все соединения через Tor, задайте следующую
	опцию командной строки:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">export JAVA_OPTIONS=&quot;$JAVA_OPTIONS -DsocksProxyHost=localhost -DsocksProxyPort=9050&quot;</span></span></span></span></font></font></span></pre><h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm">
	<a name="Запуск_сервера_Tor"></a><a name=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D1"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Запуск
	сервера Tor</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Сеть
	Tor существует благодаря пользователям,
	которые создают и обслуживают узлы
	сети, предлагая свою пропускную
	способность, и запускают onion-сервисы.
	Есть несколько способов внести свой
	вклад в работу сети.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Мост"></a><a name=".D0.9C.D0.BE.D1.81.D1.82"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Мост</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Мост
	Tor (Tor bridge) — передающий узел сети, адрес
	которого не содержится в открытом
	каталоге узлов Tor. По этой причине мост
	останется доступным для желающих
	подключиться к Tor, даже если правительство
	или интернет-провайдер блокирует все
	публичные передатчики. На странице
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://bridges.torproject.org/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">https://bridges.torproject.org/</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	объясняется, как узнать адреса мостов.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Для
	запуска моста файл </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	должен содержать только следующие
	четыре строки (см. также </span></span></span></span></font></font></span><font color="#000080"><a href="https://2019.www.torproject.org/docs/bridges#RunningABridge"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[4]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">):</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">SOCKSPort 0</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ORPort 443</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">BridgeRelay 1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Exitpolicy reject *:*</span></span></span></span></font></font></span></pre><h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
	<a name="Передающий_узел"></a><a name=".D0.9F.D0.B5.D1.80.D0.B5.D0.B4.D0.B0.D1."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Передающий
	узел</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	режиме передатчика (relay) ваша машина
	будет работать в качестве входного
	(guard relay) или промежуточного (middle relay)
	узла сети. В отличие от моста, адрес
	передающей машины будет опубликован
	в каталоге узлов Tor. Задача передающего
	узла заключается в пересылке пакетов
	к другим передатчикам или выходным
	узлам, но не в сеть Интернет.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Файл
	настроек передающего узла с пропускной
	способностью не менее 20 Кбит/с должен
	выглядеть так:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Nickname </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">название-узла-Tor</span></i></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ORPort 9001                    # Этот TCP-порт должен быть открыт или проброшен в вашем сетевом экране</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">BandwidthRate 20 KB            # Ограничить скорость передачи величиной 20 Kбит/с</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">BandwidthBurst 50 KB           # Но разрешить пиковые значения до 50 Kбит/с</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ExitPolicy reject *:*          # Запретить отправку пакетов в обычную сеть</span></span></span></span></font></font></span></pre><h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
	<a name="Выходной_узел"></a><a name=".D0.92.D1.8B.D1.85.D0.BE.D0.B4.D0.BD.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Выходной
	узел</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	запрос из сети Tor попал в обычную сеть
	Интернет, необходим выходной узел (exit
	relay). Важно понимать, что кто бы ни посылал
	запрос, для получателя всё будет
	выглядеть так, будто отправителем
	является именно выходной узел. Поэтому
	запуск выходной ноды считается наименее
	безопасным с точки зрения законности.
	Если вы размышляете над запуском
	выходного узла, то стоит изучить </span></span></span></span></font></font></span><font color="#000080"><a href="https://blog.torproject.org/tips-running-exit-node"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">советы
	и рекомендации</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	от создателей проекта.</span></span></span></span></font></font></span></p>
	<h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Настройка_2"></a><a name=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0. Копия 4"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Настройка</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	можно настроить перечень разрешённых
	на выходном узле сервисов. Например,
	разрешить весь трафик:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ExitPolicy accept *:*</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Разрешить
	только соединения через IRC-порты
	6660-6667 и запретить всё остальное:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ExitPolicy accept *:6660-6667,reject *:*</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">По
	умолчанию Tor настроен блокировать
	определённые порты. В файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	можно внести корректировки в этот
	список:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ExitPolicy accept *:119</span></span></span></span></font></font></span></pre><h4 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
	<a name="Пример_настройки_100-мегабитного_выходно"></a><a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D0"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Пример
	настройки 100-мегабитного выходного
	узла</b></span></span></span></font></font></font></span></h4>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Ниже
	даны рекомендации по настройке быстрого
	(более 100 Мбит/с) выходного узла Tor, на
	котором устанавливается межсетевой
	экран </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Iptables_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>iptables</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Haveged_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Haveged</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для повышения энтропии системы и DNS-кэш
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Pdnsd"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>pdnsd</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Настоятельно рекомендуется </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">предварительно</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	изучить статью </span></span></span></span></font></font></span><font color="#000080"><a href="https://community.torproject.org/relay/setup/exit/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">о
	настройке выходного узла</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	В разделе </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_Tor_%D0%B2_%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%B5_systemd-nspawn"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #ddddff">#Запуск
	Tor в контейнере systemd-nspawn</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	описана установка Tor в контейнер
	</span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">systemd-nspawn</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">.
	</span></span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Haveged_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #ddddff">Haveged</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	должен быть установлен на хосте.</span></span></span></span></span></font></font></span></p>
	<h5 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Tor_2"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 11pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Tor</span></span></span></span></font></font></font></span></h5>
	<h6 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Количество_соединений"></a><a name=".D0.9A.D0.BE.D0.BB.D0.B8.D1.87.D0.B5.D1."></a>
	<span style="font-variant: normal"><font color="#000000"><font face="sans-serif"><font size="2" style="font-size: 10pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Количество
	соединений</span></span></span></span></font></font></font></span></h6>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">По
	умолчанию, Tor может обрабатывать до
	8192 соединений одновременно. Можно
	увеличить это значение до 32768 </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.torproject.org/docs/faq.html.en#PackagedTor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[5]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/systemd/system/tor.service.d/increase-file-limits.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[Service]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">LimitNOFILE=32768</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Также
	нужно скорректировать системный
	параметр </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">nofile</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/security/limits.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">...</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">tor     soft    nofile    32768</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">tor     hard    nofile    32768</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">@tor    soft    nofile    32768</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">@tor    hard    nofile    32768</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Узнать
	текущее значение </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">nofile</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	можно командой </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">#
	sudo -u tor 'ulimit -Hn'</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(или разбив её на две: </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">#
	sudo -u tor bash</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">#
	ulimit -Hn</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">).</span></span></span></span></font></font></span></p>
	<h6 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Привилегированные_порты"></a><a name=".D0.9F.D1.80.D0.B8.D0.B2.D0.B8.D0.BB.D0."></a>
	<span style="font-variant: normal"><font color="#000000"><font face="sans-serif"><font size="2" style="font-size: 10pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Привилегированные
	порты</span></span></span></span></font></font></font></span></h6>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	разрешить Tor использовать привилегированные
	порты, службу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	нужно запускать от root. Не забудьте также
	добавить параметр </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">User
	tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/etc/tor/torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	чтобы понизить привилегии после запуска.</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/systemd/system/tor.service.d/start-as-root.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[Service]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">User=root</span></span></span></span></font></font></span></pre><h6 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
	<a name="Конфигурация"></a><a name=".D0.9A.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1."></a>
	<span style="font-variant: normal"><font color="#000000"><font face="sans-serif"><font size="2" style="font-size: 10pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Конфигурация</span></span></span></span></font></font></font></span></h6>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Образец
	файла настроек выходного узла Tor:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/tor/torrc</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">SOCKSPort 0                                       ## Обычный передатчик без использования локального прокси-сервера SOCKS</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Log notice stdout                                 ## Стандартное поведение Tor</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ControlPort 9051                                  ## Для соединения nyx</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">CookieAuthentication 1                            ## Для соединения nyx</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DisableDebuggerAttachment 0                       ## Для соединения nyx</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ORPort 443                                        ## Служба tor.service должна быть запущена от root</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Address $IP                                       ## IP-адрес или FQDN</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Nickname $NICKNAME                                ## Название узла</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">RelayBandwidthRate 500 Mbits                      ## bytes/KBytes/MBytes/GBytes/KBits/MBits/GBits</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">RelayBandwidthBurst 1000 MBits                    ## bytes/KBytes/MBytes/GBytes/KBits/MBits/GBits</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ContactInfo $E-MAIL - $BTC-ADDRESS                ## Контактная информация</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DirPort 80                                        ## Служба tor.service должна быть запущена от root</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DirPortFrontPage /etc/tor/tor-exit-notice.html    ## Демонстрация веб-страницы на порте 80</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">MyFamily $($KEYID),$($KEYID)...                   ## Не забудьте знак $ перед keyid ;)</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">ExitPolicy reject XXX.XXX.XXX.XXX/XX:*            ## Заблокировать отдельный домен или IP-адрес в дополнение к стандартной политике</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">User tor                                          ## Изменяет пользователя на tor, если служба была запущена от root</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">### Производительность ###</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">AvoidDiskWrites 1                                 ## Уменьшение износа SSD</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DisableAllSwap 1                                  ## Служба tor.service должна быть запущена от root</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">HardwareAccel 1                                   ## Использование аппаратной поддержки OpenSSL</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">NumCPUs 2                                         ## Запуск в двух потоках</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Информацию
	об использованных здесь опциях можно
	найти в </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.torproject.org/docs/tor-manual.html.en"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">руководстве
	Tor</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Tor
	по умолчанию запускает SOCKS-прокси на
	порте 9050 — даже если вы не не говорили
	ему этого делать. Укажите параметр
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">SOCKSPort
	0</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	если планируете использовать Tor только
	в качестве передатчика без запуска
	работающих через прокси-сервер локальных
	приложений.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">Log
	notice stdout</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	перенаправляет логи в поток стандартного
	вывода stdout, что тоже является настройкой
	Tor по умолчанию.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ControlPort
	9051</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">CookieAuthentication
	1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DisableDebuggerAttachment
	0</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	позволит использовать </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=nyx"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">nyx</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для мониторинга.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ORPort
	443</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DirPort
	80</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	говорит Tor прослушивать порты 443 и 80, а
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DirPortFrontPage</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	выводит </span></span></span></span></font></font></span><font color="#000080"><a href="https://gitweb.torproject.org/tor.git/plain/contrib/operator-tools/tor-exit-notice.html"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">страницу
	приветствия</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	при установлении соединения на порте
	80.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ExitPolicy
	reject XXX.XXX.XXX.XXX/XX:*</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	позволяет заблокировать соединения с
	определённого адреса или домена; можно
	использовать для блокировки соседних
	с выходным узлом хостов, чтобы
	злоумышленник не смог воспользоваться
	ими для обхода правил сетевого экрана.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">AvoidDiskWrites
	1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	уменьшает количество записей на диск
	и износ SSD. </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DisableAllSwap
	1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	заблокирует все текущие и будущие
	страницы памяти, чтобы её нельзя было
	выгрузить.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	команда </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">grep
	aes /proc/cpuinfo</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	возвращает какой-то результат, то ваш
	CPU поддерживает AES-инструкции. Если
	соответствующий модуль был загружен
	(</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">lsmod
	| grep aes</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">),
	то параметр </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">HardwareAccel
	1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	включит встроенное аппаратное ускорение
	шифрования </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.torservers.net/wiki/setup/server#aes-ni_crypto_acceleration"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[6]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ORPort
	443</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DirPort
	80</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DisableAllSwap
	1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	требуют запуска службы Tor от root, как
	описано в разделе </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%9F%D1%80%D0%B8%D0%B2%D0%B8%D0%BB%D0%B5%D0%B3%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D1%80%D1%82%D1%8B"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Привилегированные
	порты</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h5 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="nyx"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 11pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">nyx</span></span></span></span></font></font></font></span></h5>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	в файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/etc/tor/torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	указаны параметры </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ControlPort
	9051</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">CookieAuthentication
	1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	то можно запустить </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=nyx"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">nyx</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	командой </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">sudo
	-u tor nyx</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	просматривать список соединений Tor с
	помощью </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=nyx"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">nyx</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	нужно также указать параметр
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DisableDebuggerAttachment
	0</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Чтобы
	запустить </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">nyx</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	от другого пользователя (не </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">),
	изучите раздел </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Cookie-%D1%84%D0%B0%D0%B9%D0%BB_Tor_Control"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>#Cookie-файл
	Tor Control</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h5 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="iptables"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 11pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">iptables</span></span></span></span></font></font></font></span></h5>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Установите
	и изучите работу с </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Iptables_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>iptables</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Вместо использования </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Simple_stateful_firewall_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>экрана
	с контекстной фильтрацией</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	которому на выходном узле пришлось бы
	отслеживать тысячи соединений, мы
	настроим межсетевой экран без отслеживания
	контекста.</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/iptables/iptables.rules</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">*raw</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A PREROUTING -j NOTRACK</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A OUTPUT -j NOTRACK</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">COMMIT</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">*filter</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:INPUT DROP [0:0]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:FORWARD DROP [0:0]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:OUTPUT ACCEPT [0:0]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -p tcp ! --syn -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -p udp -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -p icmp -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -p tcp --dport 443 -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -p tcp --dport 80 -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -i lo -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">COMMIT</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	PREROUTING -j NOTRACK</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	OUTPUT -j NOTRACK</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	отключит отслеживание соединений в
	таблице </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">raw</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">:INPUT
	DROP [0:0]</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	— цель (target) цепочки </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">INPUT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	по умолчанию; отбрасывает входящий
	трафик, который не был отдельно разрешён
	опцией </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ACCEPT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">:FORWARD
	DROP [0:0]</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	— цель цепочки </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">FORWARD</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	по умолчанию; используется для обычных
	маршрутизаторов, но не подходит для
	&quot;луковых&quot;.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">:OUTPUT
	ACCEPT [0:0]</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	— цель цепочки </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">OUTPUT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	по умолчанию; разрешает все исходящие
	соединения.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	INPUT -p tcp ! --syn -j ACCEPT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	разрешает уже установленные по
	перечисленным ниже правилам входящие
	TCP соединения, а также TCP соединения от
	выходного узла.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	INPUT -p udp -j ACCEPT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	разрешает все входящие UDP соединения,
	т.к. мы не используем отслеживание
	соединений (connection tracking).</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	INPUT -p icmp -j ACCEPT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	разрешает </span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:ICMP"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">ICMP</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-пакеты.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	INPUT -p tcp --dport 443 -j ACCEPT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	разрешает входящие соединения на
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ORPort</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	INPUT -p tcp --dport 80 -j ACCEPT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	разрешает входящие соединения на
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DirPort</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">-A
	INPUT -i lo -j ACCEPT</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	разрешает входящие соединения на
	петлевой интерфейс.</span></span></span></span></font></font></span></p>
	<h5 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Haveged"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 11pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Haveged</span></span></span></span></font></font></font></span></h5>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	статье </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Haveged_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Haveged</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	описано, как определить, генерирует ли
	ваша система достаточно энтропии для
	управления большим количеством OpenSSL
	соединений; документация и советы: </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.issihosts.com/haveged/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[7]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[8]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h5 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="pdnsd"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 11pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">pdnsd</span></span></span></span></font></font></font></span></h5>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ffdddd">Важно:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ffdddd">
	Предполагается, что у вас доверенный
	(не цензурируемый) DNS-сервер.</span></span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Вы
	можете использовать </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Pdnsd"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>pdnsd</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для локального кэширования DNS-запросов,
	тогда выходной узел сможет быстрее
	выполнять разрешение и посылать меньшее
	количество запросов внешнему DNS-серверу.</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/pdnsd.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">...</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">perm_cache=102400                       ## (Значение по умолчанию)*100 = 1 Мбайт * 100 = 100 Мбайт</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">...</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">server {</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">label= &quot;resolvconf&quot;;</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">file = &quot;/etc/pdnsd-resolv.conf&quot;;    ## Чтобы не использовать файл /etc/resolv.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">timeout=4;                          ## Период ожидания ответа сервера; может быть значительно меньше, чем глобальное время ожидания</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">uptest=query;                       ## Проверять доступность сервера, посылая пустые DNS-запросы</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">query_test_name=&quot;.&quot;;                ## Используется, если удалённый сервер игнорирует пустые запросы</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">interval=10m;                       ## Выполнять тестирование каждые 10 минут</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">purge_cache=off;                    ## Игнорировать парамет TTL</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">edns_query=yes;                     ## Использовать EDNS для исходящих запросов, чтобы разрешить UDP-сообщения длиннее 512 байт; может вызвать проблемы на некоторых устаревших системах</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal">    </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">preset=off;                         ## Перед проверкой состояния сервера предполагать, что он выключен</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><span style="letter-spacing: normal"> </span></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">...</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Такая
	настройка позволит кэшировать локально
	до 100 Мбайт DNS-запросов.</span></span></span></span></font></font></span></p>
	<h6 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Uncensored_DNS"></a>
	<span style="font-variant: normal"><font color="#000000"><font face="sans-serif"><font size="2" style="font-size: 10pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Uncensored
	DNS</span></span></span></span></font></font></font></span></h6>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	ваш обычный DNS-сервер каким-то образом
	цензурируется или работает нестабильно,
	в статье </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Alternative_DNS_services"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Alternative
	DNS services</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	описаны альтернативные сервера; добавьте
	нужное в отдельный server-разделе файла
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/etc/pdnsd.conf</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(см. </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Pdnsd#DNS_servers"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Pdnsd#DNS
	servers</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">).</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="TorDNS"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">TorDNS</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Начиная
	с версий 0.2.x в Tor появился механизм
	перенаправления DNS-запросов. Чтобы его
	включить, добавьте строки ниже в файл
	настроек и </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%9F%D0%B5%D1%80%D0%B5%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>перезапустите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	демон Tor:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/tor/torrc</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DNSPort 9053</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">AutomapHostsOnResolve 1</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">AutomapHostsSuffixes .exit,.onion</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Теперь
	Tor будет принимать запросы на порт 9053
	как обычный DNS-сервер и выполнять
	разрешение доменов через сеть Tor. К
	сожалению, через Tor выполняется разрешение
	только A-записей; MX и NS запросы будут
	проигнорированы. Дополнительную
	информацию можно найти в </span></span></span></span></font></font></span><font color="#000080"><a href="https://techstdout.boum.org/TorDns/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">документации
	TorDNS</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для Debian.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Кроме
	того, появилась возможность посылать
	DNS-запросы посредством командного
	интерпретатора, командой </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor-resolve</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Например:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ tor-resolve archlinux.org</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">66.211.214.131</span></span></span></span></font></font></span></pre><h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
	<a name="Перенаправление_DNS-запросов_через_TorDN"></a><a name=".D0.9F.D0.B5.D1.80.D0.B5.D0.BD.D0.B0.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Перенаправление
	DNS-запросов через TorDNS</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Вашу
	систему можно настроить посылать </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">все</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	запросы через TorDNS вне зависимости от
	того, используется ли Tor для соединения
	с конечной целью. Для этого настройте
	систему использовать адрес </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">127.0.0.1</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в качестве DNS-сервера и отредактируйте
	строку </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">DNSPort</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	в файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/etc/tor/torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">DNSPort 53</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Альтернативное
	решение — использовать локальный
	кэширующий DNS-сервер, вроде </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Dnsmasq"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>dnsmasq</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	или </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Pdnsd"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>pdnsd</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Кэш DNS позволит несколько компенсировать
	низкую скорость TorDNS по сравнению с
	обычными DNS-серверами. Далее приведены
	инструкции по настройке </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">dnsmasq</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Установите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	пакет </span></span></span></span></font></font></span><font color="#000080"><a href="https://archlinux.org/packages/?name=dnsmasq"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">dnsmasq</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и укажите Tor прослушивать DNS запросы на
	порте 9053.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Задайте
	следующую конфигурацию dnsmasq:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/dnsmasq.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">no-resolv</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">port=53</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">server=127.0.0.1#9053</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">listen-address=127.0.0.1</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Теперь
	dnsmasq будет ожидать локальных запросов
	и использовать TorDNS в качестве посредника.
	Отредактируйте файл </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/etc/resolv.conf</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	чтобы система опрашивала только сервер
	dnsmasq:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/resolv.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">nameserver 127.0.0.1</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%97%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Запустите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	демон dnsmasq.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Наконец,
	если вы используете </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Dhcpcd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>dhcpcd</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	укажите ему не изменять настройки в
	файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">resolv.conf</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/dhcpcd.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">nohook resolv.conf</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	строка </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">nohook</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	уже есть, то добавьте </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>resolv.conf</b></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	через запятую.</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Torsocks"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Torsocks</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://archlinux.org/packages/?name=torsocks"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">torsocks</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	позволяет заставить приложение работать
	через сеть Tor без необходимости
	корректировать настройки самого
	приложения. Выдержка из руководства:</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">torsocks
	— обёртка между библиотекой torsocks и
	приложением с целью сделать каждое
	Интернет-соединение проходящим через
	сеть Tor.</span></i></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Примеры
	использования:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ torsocks elinks checkip.dyndns.org</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">$ torsocks wget -qO- </span></span></span></span></font></font></span><font color="#000080"><a href="https://check.torproject.org/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">https://check.torproject.org/</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"> | grep -i congratulations</span></span></span></span></font></font></span></pre><h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm">
	<a name="&quot;Торификация&quot;"></a><a name=".22.D0.A2.D0.BE.D1.80.D0.B8.D1.84.D0.B8."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">&quot;Торификация&quot;</span></span></span></span></font></font></font></span></h2>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	некоторых случаях более безопасно (и
	часто проще) выполнить сквозную
	&quot;торифицикацию&quot; всей системы
	вместо настройки отдельных приложений
	на использование SOCKS-порта Tor и отслеживания
	утечек DNS. Для полной торификации сетевой
	экран </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Iptables_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>iptables</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	настраивают на пересылку всех исходящих
	пакетов (помимо собственно трафика
	Tor) на </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">TransPort</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	В этом случае приложения не нужно
	настраивать для работы через Tor, хотя
	работа через </span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">SOCKSPort</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	всё ещё возможна. Торификация также
	работает и для DNS (</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">DNSPort</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">),
	но при этом нужно учитывать, что Tor
	поддерживает только протокол TCP, и, за
	исключением DNS-запросов, UDP-пакеты через
	Tor посылаться не могут. Следовательно,
	они должны блокироваться для предотвращения
	утечек.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Торификация
	через iptables даёт сравнительно надёжную
	защиту, но она не является полноценной
	заменой приложениям виртуализированной
	торификации вроде Whonix или TorVM </span></span></span></span></font></font></span><font color="#000080"><a href="https://www.whonix.org/wiki/Comparison_with_Others"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[9]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Торификация также не позволяет скрыть
	отпечаток браузера (fingerprint), поэтому
	рекомендуется воспользоваться
	&quot;амнезийным&quot; решением вроде </span></span></span></span></font></font></span><font color="#000080"><a href="https://tails.boum.org/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Tails</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Приложения всё ещё могут узнать имя
	хоста, MAC-адрес, серийный номер, временную
	зону вашего компьютера и другие данные,
	а с root-привилегиями смогут даже отключить
	сетевой экран целиком. Другими словами,
	полная торификация через iptables защищает
	от случайных соединений и DNS-утечек
	неправильно настроенного программного
	обеспечения, но не от вредоносных
	программ или ПО с серьёзными уязвимостями.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">При
	работе через </span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:%D0%9F%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80#.D0.92.D0.B8.D0.B4.D1.8B_.D0.BF.D1.80.D0.BE.D0.BA.D1.81.D0.B8-.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.BE.D0.B2"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">прозрачный
	прокси-сервер</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	можно запустить сеанс Tor дважды, на
	клиенте и на прокси, в режиме &quot;Tor
	поверх Tor&quot;. Такая схема работы обладает
	непредсказуемым поведением и потенциально
	небезопасна. В теории, трафик пользователя
	будет выполнять шесть прыжков вместо
	обычных трёх, но нет никакой гарантии,
	что дополнительные прыжки не совпадут
	с тремя изначальными — например, в
	другом порядке. Разработчики Tor Project
	считают, что это небезопасно </span></span></span></span></font></font></span><font color="#000080"><a href="https://2019.www.torproject.org/docs/faq.html.en#ChoosePathLength"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[10]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO#ToroverTor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[11]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Ниже
	приведён файл настроек для утилит
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">iptables-restore</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ip6tables-restore</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	(используются </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>службами</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">iptables.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ip6tables.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	соответственно).</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	Правила в таблице nat принудительно
	перенаправляют исходящие соединения
	на TransPort или DNSPort, и блокируют всё, что
	торифицировать не удаётся.</span></span></span></span></span></font></font></span></p>
	<ul>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Флагами
		</span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--ipv6</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
		и </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--ipv4</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
		задаются правила для конкретных версий
		протокола </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://en.wikipedia.org/wiki/ru:IP"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">IP</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">.
		Таким образом, утилиты </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">iptables-restore</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
		и </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ip6tables-restore</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
		могут использовать один и тот же файл
		настроек.</span></span></span></span></span></font></font></span></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">В
		случае явного указания флага </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--ipv6</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
		или </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--ipv4</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">,
		утилита </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ip*tables-restore</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
		будет игнорировать правило, если оно
		установлено для другой версии протокола.</span></span></span></span></span></font></font></span></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ip6tables</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
		не поддерживает флаг </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">--reject-with</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">.</span></span></span></span></span></font></font></span></p>
	</ul>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Убедитесь,
	что в файле </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	есть следующие строки:</span></span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="display: inline-block; border: 1px solid #bbbbdd; padding: 0.14cm"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff"><span style="font-variant: normal">SOCKSPort 9050</span></span></span></span></span></span></font></font></span>
<span style="display: inline-block; border: 1px solid #bbbbdd; padding: 0.14cm"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff"><span style="font-variant: normal">DNSPort 5353</span></span></span></span></span></span></font></font></span>
<span style="display: inline-block; border: 1px solid #bbbbdd; padding: 0.14cm"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff"><span style="font-variant: normal">TransPort 9040</span></span></span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Подробнее
	смотрите руководство </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://man.archlinux.org/man/iptables.8"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">iptables(8)</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">.</span></span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	Если вы получили ошибку </span></span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">iptables-restore:
	unable to initialize table 'nat'</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">,
	то нужно загрузить некоторые модули
	ядра:</span></span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="display: inline-block; border: 1px solid #bbbbdd; padding: 0.14cm"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff"><span style="font-variant: normal"># modprobe ip_tables iptable_nat ip_conntrack iptable-filter ipt_state</span></span></span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/iptables/iptables.rules</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">*nat</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:PREROUTING ACCEPT [6:2126]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:INPUT ACCEPT [0:0]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:OUTPUT ACCEPT [17:6239]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:POSTROUTING ACCEPT [6:408]</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A PREROUTING ! -i lo -p udp -m udp --dport 53 -j REDIRECT --to-ports 5353</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A PREROUTING ! -i lo -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j REDIRECT --to-ports 9040</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A OUTPUT -o lo -j RETURN</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv4 -A OUTPUT -d 192.168.0.0/16 -j RETURN</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A OUTPUT -m owner --uid-owner &quot;tor&quot; -j RETURN</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A OUTPUT -p udp -m udp --dport 53 -j REDIRECT --to-ports 5353</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A OUTPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j REDIRECT --to-ports 9040</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">COMMIT</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">*filter</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:INPUT DROP [0:0]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:FORWARD DROP [0:0]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:OUTPUT DROP [0:0]</span></span></span></span></font></font></span>

<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -i lo -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -p icmp -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv4 -A INPUT -p tcp -j REJECT --reject-with tcp-reset</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv4 -A INPUT -p udp -j REJECT --reject-with icmp-port-unreachable</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv4 -A INPUT -j REJECT --reject-with icmp-proto-unreachable</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv6 -A INPUT -j REJECT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv4 -A OUTPUT -d 127.0.0.0/8 -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv4 -A OUTPUT -d 192.168.0.0/16 -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv6 -A OUTPUT -d ::1/8 -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A OUTPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">-A OUTPUT -m owner --uid-owner &quot;tor&quot; -j ACCEPT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv4 -A OUTPUT -j REJECT --reject-with icmp-port-unreachable</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">--ipv6 -A OUTPUT -j REJECT</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">COMMIT</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Данный
	файл также подходит для утилиты
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ip6tables-restore</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Создайте символическую ссылку на него:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># ln -s /etc/iptables/iptables.rules /etc/iptables/ip6tables.rules</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Убедитесь,
	что Tor работает, и </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%97%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5/%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>запустите/включите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	службы </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">iptables</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">ip6tables</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">При
	необходимости можно </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%9E%D1%82%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D1%83%D0%B9%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>добавить
	указания</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">Requires=iptables.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">Requires=ip6tables.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	к любому юниту systemd, чтобы выбранный
	процесс запускался строго после
	включения межсетевого экрана.</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Советы_и_рекомендации"></a><a name=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Советы
	и рекомендации</span></span></span></span></font></font></font></span></h2>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Возможности_ядра"></a><a name=".D0.92.D0.BE.D0.B7.D0.BC.D0.BE.D0.B6.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Возможности
	ядра</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	необходимо запустить Tor от обычного
	пользователя, и в то же время использовать
	порты меньше 1024, то можно воспользоваться
	функциональностью ядра для выдачи
	процессу </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/usr/bin/tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	разрешения выполнять привязку
	привилегированных портов:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># setcap CAP_NET_BIND_SERVICE=+eip /usr/bin/tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">Примечание:</span></span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	После обновления пакета Tor эти разрешения
	сбросятся. Создайте </span></span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%A5%D1%83%D0%BA%D0%B8"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: #ddddff">хук</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ddddff">
	для автоматической выдачи разрешений
	после обновлений.</span></span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	вы используете службу systemd, то выдать
	Tor соответствующие разрешения можно
	также через настройки системного
	демона. Это удобно тем, что разрешения
	не нужно возобновлять после каждого
	обновления Tor:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/systemd/system/tor.service.d/netcap.conf</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[Service]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">CapabilityBoundingSet=</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">CapabilityBoundingSet=CAP_NET_BIND_SERVICE</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">AmbientCapabilities=</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">AmbientCapabilities=CAP_NET_BIND_SERVICE</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Подробности
	можно найти на странице </span></span></span></span></font></font></span><font color="#000080"><a href="https://superuser.com/questions/710253/allow-non-root-process-to-bind-to-port-80-and-443"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">superuser.com</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm"><a name="Решение_проблем"></a><a name=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Решение
	проблем</span></span></span></span></font></font></font></span></h2>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Проблема_с_параметром_User"></a><a name=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Проблема
	с параметром User</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	не удалось запустить демон Tor, выполните
	следующую команду от root (или воспользуйтесь
	утилитой </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/Sudo"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>sudo</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">):</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Ошибка</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">May 23 00:27:24.624 [warn] Error setting groups to gid 43: &quot;Operation not permitted&quot;.</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">May 23 00:27:24.624 [warn] If you set the &quot;User&quot; option, you must start Tor as root.</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">May 23 00:27:24.624 [warn] Failed to parse/validate config: Problem with User value. See logs for details.</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">May 23 00:27:24.624 [err] Reading config failed--see warnings above.</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">означает
	проблемы с параметром User. Скорее всего,
	один или несколько файлов/каталогов в
	каталоге </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/var/lib/tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	не принадлежат пользователю </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.
	Это можно определить с помощью команды
	</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">find</span></i></span></span></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">find /var/lib/tor/ ! -user tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Для
	всех выведенных файлов и каталогов
	нужно поменять параметр владельца.
	Можно сделать это индивидуально для
	каждого файла</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># chown tor:tor /var/lib/tor/</span></span></span></span></font></font></span><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><i><span style="font-weight: normal">имя_файла</span></i></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">или
	отредактировать все сразу командой</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># chown -R -v tor:tor /var/lib/tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Теперь
	Tor должен запуститься без проблем.</span></span></span></span></font></font></span></p>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Если
	запустить службу всё же не удаётся,
	запустите её от root. Измените имя
	пользователя в файле </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/etc/tor/torrc</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">User tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Затем
	отредактируйте файл службы systemd
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">/usr/lib/systemd/system/tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">[Service]</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">User=root</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Group=root</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Type=simple</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">В
	дальнейшем процесс будет запускаться
	от пользователя </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	поэтому измените UID и GID файлов на </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	и добавьте разрешение на запись:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># chown -R tor:tor /var/lib/tor/</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># chmod -R 700 /var/lib/tor</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Сохраните
	изменения:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border: 1px solid #bbccdd; padding: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"># systemctl --system daemon-reload</span></span></span></span></font></font></span></pre><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Наконец,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/%D0%97%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>запустите</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	</span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">tor.service</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Проблемы_с_прокси_tor-browser"></a><a name=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0. Копия 1"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Проблемы
	с прокси tor-browser</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 100%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<font color="#000080"><a href="https://aur.archlinux.org/packages/tor-browser/"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">tor-browser</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><font size="2" style="font-size: 10pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">AUR</span></span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	обычно нормально работает без
	дополнительных настроек. Если
	установленный/настроенный прокси
	выдаёт ошибку </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">proxy
	server is refusing connections</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	при любой попытке установить соединение,
	попробуйте сбросить настройки, переместив
	или удалив каталог </span></span></span></span></font></font></span><span style="display: inline-block; border: 1px solid #eaecf0; padding: 0.04cm"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal"><span style="background: #ebf1f5"><code class="western">~/.tor-browser</span></span></span></span></span></span></font></font></span></code><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></span></span></font></font></span></p>
	<h3 class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm"><a name="Пустой_чёрный_экран_в_tor-browser"></a><a name=".D0.9F.D1.83.D1.81.D1.82.D0.BE.D0.B9_.D1"></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="3" style="font-size: 13pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>Пустой
	чёрный экран в tor-browser</b></span></span></span></font></font></font></span></h3>
	<p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm">
	<span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">При
	работе с </span></span></span></span></font></font></span><font color="#000080"><a href="https://wiki.archlinux.org/title/AppArmor"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b>AppArmor</b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">
	для доступа к ресурсам необходимо
	внести изменения в профиль Tor Browser </span></span></span></span></font></font></span><font color="#000080"><a href="https://unix.stackexchange.com/questions/550074/debian-tor-browser-showing-a-black-screen/550246#550246"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[12]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">,
	</span></span></span></span></font></font></span><font color="#000080"><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=942901"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">[13]</span></b></span></span></span></font></span></font></span></a></font><span style="font-variant: normal"><font color="#202122"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></span></font></font></span></p>
	<pre class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; border-top: 1px solid #bbccdd; border-bottom: none; border-left: none; border-right: 1px solid #bbccdd; padding-top: 0.04cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0.04cm; background: #ebf1f5"><span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">/etc/apparmor.d/local/torbrowser.Browser.firefox</span></span></span></span></font></font></span>
<span style="font-variant: normal"><font color="#222222"><font face="monospace, monospace"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">owner /{dev,run}/shm/org.mozilla.*.* rw,</span></span></span></span></font></font></span></pre><h2 class="western" style="line-height: 130%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0.25cm; border-top: none; border-bottom: 1px solid #a2a9b1; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.04cm; padding-left: 0cm; padding-right: 0cm">
	<a name="Смотрите_также"></a><a name=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1."></a>
	<span style="font-variant: normal"><font color="#222222"><font face="sans-serif"><font size="4" style="font-size: 16pt"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><span style="font-weight: normal">Смотрите
	также</span></span></span></span></font></font></font></span></h2>
	<ul>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<font color="#000080"><a href="https://www.torproject.org/docs/tor-doc-unix.html.en"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Запуск
		клиента Tor на Linux/BSD/Unix</span></b></span></span></span></font></span></font></span></a></font></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<font color="#000080"><a href="https://trac.torproject.org/projects/tor/wiki#Unixish"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Список
		статей о Tor для Unix</span></b></span></span></span></font></span></font></span></a></font></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<font color="#000080"><a href="https://trac.torproject.org/projects/tor/wiki/doc/SupportPrograms"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Программы
		с интеграцией Tor</span></b></span></span></span></font></span></font></span></a></font></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<a href="https://www.torproject.org/docs/tor-hidden-service.html.en"><font color="#000080"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Как
		включить Tor </span></b></span></span></span></font></span></font></span></font><font color="#000080"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><i><b><span style="background: transparent">Hidden
		Service</span></b></i></span></span></font></span></font></span></font></a></p>
		<li><p class="western" style="line-height: 160%; orphans: 2; widows: 2; margin-top: 0.42cm; margin-bottom: 0cm">
		<font color="#000080"><a href="https://trac.torproject.org/projects/tor/wiki/doc/PluggableTransports"><span style="font-variant: normal"><font color="#0077bb"><span style="text-decoration: none"><font face="sans-serif"><span style="letter-spacing: normal"><span lang="ru-RU"><span style="font-style: normal"><b><span style="background: transparent">Pluggable
		Transports для обфускации трафика Tor</span></b></span></span></span></font></span></font></span></a></font></p>
	</ul>
</div>
<div id="Раздел6" dir="ltr"><p class="western" align="left" style="line-height: 100%; margin-bottom: 0cm">
	<br/>

	</p>
	<p class="western" align="left" style="line-height: 100%; margin-bottom: 0cm">
	<br/>

	</p>
	<p class="western" align="left" style="line-height: 100%; margin-bottom: 0cm">
	<br/>

	</p>
	<p class="western" align="left" style="line-height: 100%; margin-bottom: 0cm">
	<br/>

	</p>
</div>
</body>
</html>