Xorg (Русский)
Эта статья или раздел нуждается в переводе
Примечания: Перевод устарел. (обсуждение: Talk:Xorg (Русский)#)
Эта страница нуждается в сопроводителе
Статья не гарантирует актуальность информации. Помогите русскоязычному сообществу поддержкой подобных страниц. См. Команда переводчиков ArchWiki
Ссылки по теме
* Запуск X при входе
* Autostarting (Русский)
* Экранный менеджер
* Среда рабочего стола
* Оконный менеджер
* Font configuration (Русский)
* Темы курсора
* Wayland
* Xinitrc (Русский)
Xorg - свободная открытая реализация оконной системы X11. Xorg очень популярен среди пользователей Linux, что привело к тому, что большинство приложений с графическим интерфейсом используют X11, из-за этого Xorg доступен в большинстве дистрибутивов. Более подробную информацию смотрите в статье о Xorg в Википедии или на wiki X.org
Contents
 [hide] 
* 1Установка
o 1.1Установка драйвера
* 2Запуск
* 3Настройка
o 3.1Устройства ввода
* 3.1.1Synaptics Touchpad
* 3.1.2Отключение горячего подключения
o 3.2Настройки клавиатуры
* 3.2.1Задержка и скорость повтора
* 3.2.2Просмотр настроек клавиатуры
* 3.2.3Переключение раскладок средствами X.org
* 3.2.4Включение pointerkeys
* 3.2.5Модель клавиатуры
o 3.3InputClasses
* 4Графика
o 4.1Установка драйвера
o 4.2Настройка монитора
* 4.2.1Начало работы
* 4.2.2Несколько мониторов
* 4.2.2.1NVIDIA
* 4.2.2.2Более одной видеокарты
* 4.2.2.3Скрипт для переключения внутреннего/внешнего мониторов для ноутбуков
o 4.3Размер дисплея/DPI
o 4.4DPMS
o 4.5Monitor
* 4.5.1Строчная синхронизация (horizontal sync)
* 4.5.2Частота обновления
o 4.6Screen
* 4.6.1Глубина цветовой гаммы
* 4.6.2Разрешение
o 4.7Шрифты
o 4.8Примеры файлов xorg.conf
* 5Усовершенствование загрузки X
* 6Изменения в модульном Xorg
o 6.1Самые распространённые пакеты
o 6.2OpenGL 3D ускорение
o 6.3glxgears и glxinfo
* 7Tips & tricks
o 7.1Закрытие приложение по хоткею
* 8Проблемы
o 8.1Если вместо всех шрифтов квадратики
o 8.2Быстрое решение конфликта с Bitstream-Vera
o 8.3Быстрое решение конфликтов файлов в /usr/include
o 8.4Конфликты с libgl-dri
o 8.5НЕработающее колесо мыши
o 8.6Дополнительные кнопки на мыши перестали работать
o 8.7Проблемы с клавиатурой
* 8.7.1AltGR (Compose клавиша) не работает правильно
* 8.7.2Невозможно установить раскладку командой setxkbmap
* 8.7.3Настройка франко-канадской раскладки (бывшая ca_enhanced)
o 8.8Отсутствующие библиотеки
o 8.9Некоторые пакеты не собираются, жалуясь на отсутствующие X11 includes
o 8.10Невозможно загрузить шрифт '(null)'
o 8.11Иконки KDE в панели задач и на Десктопе не работают
o 8.12Обновление с testing до current (отсутствующие файлы)
o 8.13Проблемы с MIME типами в различных DE
o 8.14DRI перестало работать с картами Matrox
o 8.15Не выставляется нужное разрешение экрана
* 9Полезные ссылки
Установка
Установите пакет xorg-server из официальных репозиториев.
В дополнение к нему, могут понадобиться пакеты из мета-пакета xorg-server-utils[ссылка недействительна: package not found] для некоторых способов настроек. О них рассказано в соответствующих разделах. Другие полезные пакеты находятся в группе xorg-apps.
Совет: Вам, скорее всего, понадобится установить оконный менеджер или среду рабочего стола для X.
Установка драйвера
Ядро Linux включает в себя видеодрайверы с открытым исходным кодом и поддержку аппаратного ускорения буфера кадров. Однако, для работы OpenGL и двухмерного ускорения в X11 требуется поддержка пользовательского ПО.
Сперва определите вашу видеокарту:
$ lspci | grep -e VGA -e 3D
Затем установите соответствующий драйвер. Вы можете поискать в базе данных пакетов полный список видеодрайверов с открытым исходным кодом:
$ pacman -Ss xf86-video
Стандартный графический драйвер — xf86-video-vesa, который поддерживает огромное число чипсетов, но не включает в себя ни 2D, ни 3D ускорение. Если более подходящий драйвер отсутствует или не загружается, X будет использовать vesa.
Для того, чтобы ускорение видео работало, и часто для того, чтобы разблокировать все режимы, в которых может работать GPU, требуется правильный видеодрайвер:
Примечание: Если Вы пользуетесь ноутбуком с разрешённым NVIDIA Optimus, который использует интегрированную видеокарту вместе с дискретной видеокартой, обратитесь к статье Bumblebee.
БрендТипДрайверMultilibДокументацияAMD/ATIСвободныйxf86-video-atilib32-mesa-libgl[ссылка недействительна: replaced by lib32-mesa]ATI (Русский)ПроприетарныйcatalystAURlib32-catalyst-utilsAURAMD CatalystIntelСвободныйxf86-video-intellib32-mesa-libgl[ссылка недействительна: replaced by lib32-mesa]Intel graphics (Русский)NvidiaСвободныйxf86-video-nouveaulib32-mesa-libgl[ссылка недействительна: replaced by lib32-mesa]Nouveau (Русский)Проприетарныйnvidialib32-nvidia-libgl[ссылка недействительна: replaced by lib32-nvidia-utils]NVIDIA (Русский)nvidia-340xxlib32-nvidia-340xx-libgl[ссылка недействительна: replaced by lib32-nvidia-340xx-utils]nvidia-304xx[ссылка недействительна: package not found]lib32-nvidia-304xx-libgl[ссылка недействительна: package not found]Другие видео драйверы можно найти в группе xorg-drivers.
Во избежание проблем X следует запускать без драйверов с закрытым исходным кодом, которые обычно требуются только для расширенных возможностей, таких, как быстрый 3D рендеринг в играх.
Запуск
См. также: Запуск X при загрузке
Совет: Самый простой способ запустить X — воспользоваться экранным менеджером, например GDM или SLiM.
Если вы хотите запустить X без менеджера дисплея, установите пакет xorg-xinit. Можно установить xorg-twm, xorg-xclock и xterm, чтобы запустилась среда, установленная по умолчанию.
Команды startx и xinit запустят X-сервер и клиенты (Команда startx — просто интерфейс для более универсальной команды xinit). Для определения клиента startx/xinit читают файл ~/.xinitrc. При его отсутствии читается /etc/X11/xinit/xinitrc, который запустит оконный менеджер Twm, Xclock и Xterm.
Более подробная информация доступна в статье xinitrc.
Примечание:
* Если возникают проблемы, почитайте журнал в /var/log/Xorg.0.log. Строчки, начинающиеся с (EE) сообщают об ошибках, (WW) — предупреждения.
* Если файл ~/.xinitrc пустой, нужно удалить или отредактировать его, чтобы запустить X правильно. Если этого не сделать, X покажет пустой экран без ошибок в Xorg.0.log. Удаление этого файла запустит среду по умолчанию.
Настройка
Xorg можно настроить через /etc/X11/xorg.conf, /etc/xorg.conf или файлы, находящиеся в каталоге /etc/X11/xorg.conf.d/. Обычно никаких настроек не требуется. Вы можете создавать новые файлы конфигурации в /etc/X11/xorg.conf.d/, но их имена должны начинаться с XX-, где XX — номер, и оканчиваться на .conf (например, файл, начинающийся на 10, запускается раньше 20).
Кроме того, драйвер может поставляться с инструментами для настройки Xorg. Например, для NVIDIA запустите nvidia-xconfig, для ATI — aticonfig.
Устройства ввода
Synaptics Touchpad
Основная статья: Touchpad Synaptics
Если у вас ноутбук, установите драйвер тачпада из пакета xf86-input-synaptics, доступного в официальном репозитории.
После установки вы можете обнаружить файл 10-synaptics.conf в /etc/X11/xorg.conf.d. Можете закомментировать или удалить строчки InputClass, связанные с тачпадом, в файле 10-evdev.conf.
Отключение горячего подключения
С версии 1.8 Xorg-server использует udev для определения устройств. Эта настройка отключает его использование.
Section "ServerFlags"
    Option          "AutoAddDevices" "False"
EndSection
Важно: Это отключит горячее подключения для всех устройств ввода. Гораздо удобнее, чтобы udev сам подключал устройства. Отключение горячего подключения не рекомендуется!
Настройки клавиатуры
Xorg может определить клавиатуру неправильно, что может дать проблемы с раскладкой.
Чтобы увидеть полный список поддерживаемых моделей клавиатур и раскладок, откройте /usr/share/X11/xkb/rules/xorg.lst.
Установка раскладки для текущего сеанса Xorg:
# setxkbmap dvorak
Задержка и скорость повтора
Используйте команду xset r rate DELAY RATE для изменения, потом запишите команду в ~/.xinitrc, чтобы сохранить настройки.
Просмотр настроек клавиатуры
$ setxkbmap -print -verbose 10

 Setting verbose level to 10
 locale is C
 Applied rules from evdev:
 model:      evdev
 layout:     us
 options:    terminate:ctrl_alt_bksp
 Trying to build keymap using the following components:
 keycodes:   evdev+aliases(qwerty)
 types:      complete
 compat:     complete
 symbols:    pc+us+inet(evdev)+terminate(ctrl_alt_bksp)
 geometry:   pc(pc104)
 xkb_keymap {
         xkb_keycodes  { include "evdev+aliases(qwerty)" };
         xkb_types     { include "complete"      };
         xkb_compat    { include "complete"      };
         xkb_symbols   { include "pc+us+inet(evdev)+terminate(ctrl_alt_bksp)"    };
         xkb_geometry  { include "pc(pc104)"     };
 };

В связи с выходом X.org 1.8, HAL больше не отвечает за переключение раскладок клавиатуры.
Переключение раскладок средствами X.org
Примечание: Установите xorg-xkbevd и добавьте xkbevd в секцию DAEMONS файла /etc/rc.conf.
Для настройки переключения раскладок нужно создать новый файл в /etc/X11/xorg.conf.d/, например, 20-keyboard-layout.conf со следующим содержанием:
Section "InputClass"
	Identifier             "keyboard-layout"
	MatchIsKeyboard        "on"
	Option "XkbLayout" "us,ru"
	Option "XkbOptions" "grp:caps_toggle,grp_led:scroll"
EndSection
За комбинацию клавиш переключения между двумя раскладками отвечает опция XkbOptions. Например, если вы хотите настроить переключение по Caps Lock:
Option "XkbOptions" "grp:caps_toggle"
Или переключение по Ctrl+Shift:
Option "XkbOptions" "grp:ctrl_shift_toggle"
Опция "grp_led:scroll" отвечает за включение индикатора Scroll Lock при смене на вторую раскладку (в данном случае - ru(winkeys)). Можно использовать вместо Scroll Lock и Caps Lock, и Num Lock.
Также вместо редактирования настроек можно добавить следующую команду в ~/.xinitrc:
setxkbmap -layout "us,ru" -option "grp:caps_toggle,grp_led:scroll"
Включение pointerkeys
Mouse keys теперь по умолчанию отключены, и их нужно включать вручную:
/etc/X11/xorg.conf.d/20-enable-pointerkeys.conf
Section "InputClass"
    Identifier             "Keyboard Defaults"
    MatchIsKeyboard        "yes"
    Option                 "XkbOptions" "keypad:pointerkeys"
EndSection
Также можно запустить:
$ setxkbmap -option keypad:pointerkeys
Both will make the Shift+Num Lock shortcut toggle mouse keys.
Модель клавиатуры
Чтобы изменить модель клавиатуры, используйте опцию XkbModel в разделе InputDevice клавиатуры. Например, если у вас клавиатура Microsoft Wireless Multimedia Keyboard:
Option "XkbModel" "microsoftmult"
InputClasses
Эта статья или раздел нуждается в переводе
Примечания: в английской вики имеется несколько примеров по настройке InputClass в файлах конфигурации (обсуждение: Talk:Xorg (Русский)#)
Графика
Установка драйвера
Графическим драйвером по умолчанию является vesa (xf86-video-vesa), поддерживаемый почти всеми видеокартами, но в нем нет поддержки 2D или 3D ускорения, для включения которого вам потребуется установить драйвер специально для вашей видеокарты.
Для начала определите ее:
$ lspci | grep VGA
После этого установите соответствующий драйвер. Вы можете поискать их с помощью команды:
$ pacman -Ss xf86-video
Доступные открытые драйверы:
* NVIDIA: xf86-video-nouveau (см. Nouveau)
* Intel: xf86-video-intel (см. Intel)
* ATI: xf86-video-ati (см. ATI)
Проприетарные драйверы:
* NVIDIA: nvidia (см. NVIDIA)
* ATI: catalystAUR (см. ATI Catalyst)
Xorg должен работать гладко и без проприетарных драйверов, которые обычно нужны только для «продвинутых» функций, таких как быстрое 3D-ускорение, настройка нескольких экранов и ТВ-выход.
Настройка монитора
Начало работы
Примечание: Эти настройки необязательны, и не следует что-либо менять, если вы не знаете, что делаете.
Но нужно выполнять настройку при использовании двух мониторов и драйвера nouveau. См. Nouveau#Configuration[broken link: invalid section].
Создайте новый файл конфигурации, например /etc/X11/xorg.conf.d/10-monitor.conf. Вставьте в него следующий код:
Section "Monitor"
    Identifier             "Monitor0"
EndSection

Section "Device"
    Identifier             "Device0"
    Driver                 "vesa" #Choose the driver used for this monitor
EndSection

Section "Screen"
    Identifier             "Screen0"  #Collapse Monitor and Device section to Screen section
    Device                 "Device0"
    Monitor                "Monitor0"
    DefaultDepth            16 #Choose the depth (16||24)
    SubSection             "Display"
        Depth               16
        Modes              "1024x768_75.00" #Choose the resolution
    EndSubSection
EndSection
Несколько мониторов
NVIDIA
См. NVIDIA#Multiple monitors
Более одной видеокарты
Вы должны определить нужный драйвер для использования и поставить bus ID нужной видеокарты.
Section "Device"
    Identifier             "Screen0"
    Driver                 "nouveau"
    BusID                  "PCI:0:12:0"
EndSection

Section "Device"
    Identifier             "Screen1"
    Driver                 "radeon"
    BusID                  "PCI:1:0:0"
EndSection
Чтобы узнать bus ID:
$ lspci | grep VGA
01:00.0 VGA compatible controller: nVidia Corporation G96 [GeForce 9600M GT] (rev a1)
bus ID здесь 1:0:0.
Скрипт для переключения внутреннего/внешнего мониторов для ноутбуков
#!/bin/bash

IN="LVDS1"
EXT="VGA1"

if (xrandr | grep "$EXT" | grep "+")
    then
    xrandr --output $EXT --off --output $IN --auto
    else
        if (xrandr | grep "$EXT" | grep " connected")
            then
            xrandr --output $IN --off --output $EXT --auto
        fi
fi
Узнать имена мониторов можно с помощью команды:
# xrandr -q
Если у вас нет xrandr, установите пакет xorg-xrandr.
Размер дисплея/DPI
Для того чтобы выбрать правильный размер шрифтов, размер дисплея должен быть установлен для предпочитаемого DPI.
Сначала можно попробовать - настроить Xorg на автоопределение DPI и размеров экрана с помощью DDC.
В /etc/X11/xorg.conf :
...
Section "Module"
# support for Data Display Channel. Allows to query the monitor capabilities via the video card
Load  "ddc"
# serial bus over which you speak the ddc protocol to get info from the monitor
Load "i2c"
...
Section Screen
...
DefaultColorDepth 24
SubSection "Display"
 Depth     24
 Modes "1280x1024" "1152x864" "1024x768" "800x600" "640x480"
EndSubSection
...
Не прописывайте Modeline и DisplaySize. Иногда это работает, если нет можно всё настроить вручную.

В секции "Monitor" пропишите размер дисплея в миллиметрах:
Section "Monitor"
   ...
 DisplaySize 336 252 # 96 DPI @ 1280x960
   ...
EndSection
Формула, рассчитывающая значение DisplaySize такова Ширина x 25.4 / DPI и Высота x 25.4 / DPI. Например, если вы запускаете Xorg с разрешением 1024x768 и хотите DPI, равное 96, используйте 1024 x 25.4 / 96 и 768 x 25.4 / 96. Округлённые значения приведены ниже.
# calc: (x|y)pixels * 25.4 / dpi
# DisplaySize 168 126 # 96 DPI @ 640x480
# DisplaySize 210 157 # 96 DPI @ 800x600
# DisplaySize 269 201 # 96 DPI @ 1024x768
# DisplaySize 302 227 # 96 DPI @ 1152x864
# DisplaySize 336 252 # 96 DPI @ 1280x960
# DisplaySize 336 269 # 96 DPI @ 1280x1024 (соотношение сторон не 4:3)
# DisplaySize 420 315 # 96 DPI @ 1600x1200

Для nVidia драйверов вы, возможно, захотите отключить автоматическое определение DPI и поставить его вручную. Существует также более простой способ настройки DPI на этих картах. Любая или обе из следующих строк могут быть вставлены в секцию Device для вашей nVidia карты.
  Option   "UseEdidDpi" "false"
  Option   "DPI" "96 x 96"
Результат может быть проверен с помощью следующей команды, которая должна вернуть 96x96 точек на дюйм, если вы установили DPI на 96.
xdpyinfo | grep -B1 dot
DPMS
DPMS (Display Power Management Signaling) — технология, позволяющая настроить энергосбережение монитора, когда компьютер не используется. Она позволит вам автоматически переключить монитор в режим ожидания через определенное время простоя. См. DPMS
Monitor
В зависимости от вашего оборудования, у Xorg может не получиться обнаружить верно возможности вашего монитора или же просто вы захотите использовать меньшее разрешение, чем то. которое поддерживает ваш монитор. Возможно, вы захотите посмотреть на следующие значения в руководстве вашего монитора перед их установкой. Следующие настройки указываются в секции Monitor:
Строчная синхронизация (horizontal sync)
HorizSync 28-64
Частота обновления
VertRefresh 60
Screen
Следующие настройки указываются в секции Screen:
Глубина цветовой гаммы
Depth 24
Разрешение
Modes "1280x1024" "1024x768" "800x600"
Шрифты
Некоторые советы по настройке шрифтов можно найти в статье, посвящённой этому.
Примеры файлов xorg.conf
Работающий пример для видео карты GF-5200, монитор CTX, стандартные клавиатура и мышь
Section "ServerLayout"
	Identifier     "Minimal layout"
	Screen         "Screen0" 0 0
EndSection

Section "Module"
	SubSection "extmod"
		Option	    "omit xfree86-dga"
	EndSubSection
EndSection

Section "Monitor"
	Identifier   "CTX VL500 series, MS500 series (120 Hz)|0"
	DisplaySize  280	210
	HorizSync    30.0 - 70.0
	VertRefresh  50.0 - 120.0
EndSection

Section "Device"
	Identifier  "Card0|0"
	Driver      "nvidia"
EndSection

Section "Screen"
	Identifier "Screen0"
	Device     "Card0|0"
	Monitor    "CTX VL500 series, MS500 series (120 Hz)|0"
	DefaultDepth     24
	SubSection "Display"
		Modes    "1024x768" "1024x736" "1024x600" "960x720" "848x480" "832x624" "800x600"  "720x576" "640x480"
	EndSubSection
EndSection
* Shadowhand (nv и nvidia драйвера): http://people.os-zen.net/shadowhand/configs/xorg.conf
* Cerebral (fglrx и radeon драйвера): http://www.student.cs.uwaterloo.ca/~tjwillar/configs/xorg.conf
* raskolnikov (via unichrome и synaptics драйвера): http://athanatos.free.fr/Arch/xorg.conf
* cheer (nvidia и synaptics драйвера, русская раскладка, dell 9400): http://lice.wordpress.com/dell-9400-configuration/xorgconf/
Усовершенствование загрузки X
для опций X смотрите
man Xserver
Следующие опции могут быть добавлены к переменной "defaultserverargs" в файле /usr/bin/startx.
запретить X прослушивание по tcp:
-nolisten tcp
избавиться от серого узора при загрузке X и заменить его чёрным фоном:
-br
включить задержку загрузки глифов для 16-битных шрифтов:
-deferglyphs 16
Изменения в модульном Xorg
Самые распространённые пакеты
Примечание: Мета-пакет 'xorg' включает в себя самые распространённые нужные пакеты - когда вы делаете pacman -Syu для обновления с Xorg 6.8, он должен обновиться до этого пакета
Удостоверьтесь, что вы установили драйвера для мыши, клавиатуры и видеокарты. Для устройств ввода пакеты xf86-input-keyboard и xf86-input-mouse должны быть установлены. Дргие пакеты вида xf86-input-* доступны для других устройств ввода.
Что касается видеокарты, найдите, какой драйвер требуется и установите соответствующий пакет вида xf86-video-*. Пользователи ATI и Nvidia могут установить проприетарные драйвера для своих видеокарт (NVIDIA, ATI).
Для установки всех драйверов сразу доступны пакеты xorg-input-drivers и xorg-video-drivers.
OpenGL 3D ускорение
Xorg 7.1 в Arch Linux использует модульный вид для mesa, системы рендеринга OpenGL. Доступны некоторые реализации:
* libgl-dri: свободная реализация DRI OpenGL. Возвращается к софтверному рендерингe, когда не установлен ни один из DRI драйверов.
* некоторые другие, предоставляющие libGL (ati, nvidia)
Когда pacman устанавливает приложение, которому требуется mesa, он установит один из этих пакетов. Чтобы быть уверенным в установке нужной библиотеки для вашей системы, установите её до установки Xorg. Установка нужного пакета после также возможна, хотя это может иногда привести к некоторым ошибкам с зависимостями, которые можно преодолеть с помощью опции -d.
glxgears и glxinfo
Эти приложения находятся в пакете mesa-demos.
Tips & tricks
Закрытие приложение по хоткею
Привяжите скрипт к хоткею:
#!/bin/bash
windowFocus=$(xdotool getwindowfocus);
pid=$(xprop -id $windowFocus | grep PID);
kill -9 $pid
Зависимости: xorg-xprop, xdotool
Проблемы
Если вместо всех шрифтов квадратики
1. pango-querymodules > /etc/pango/pango.modules
Быстрое решение конфликта с Bitstream-Vera
Если вы видите сообщение о конфликте ttf-bitstream-vera conflicts и xorg:
1. Выйдите из pacman'а, ответив no.
2. Run pacman -Rd xorg
3. Run pacman -Syu
4. Run pacman -S xorg
5. Обновите пути в файле /etc/X11/xorg.conf
Быстрое решение конфликтов файлов в /usr/include
Если вы видите сообщения о конфликтах файлов в /usr/include/X11 и /usr/include/GL:
1. выполните rm /usr/include/{GL,X11}
2. выполните pacman -Su
Каталоги, на которые были созданы символические ссылки будут удаленыи заменены реальными каталогами в новом пакете xorg, который и вызвал конфликт у файлов.
Конфликты с libgl-dri
Если вы видите сообщение типа:
:: libgl-dri conflicts with nvidia-legacy. Remove nvidia-legacy? [Y/n]
это проиходит из-за нескольких реализаций OpenGL, объяснённых в разделе OpenGL выше - pacman пытается установить libgl-dri для удовлетворения зависимостей, но ещё и хочет обновить ваш видеодрайвер, а они конфликтуют. Для разрешения проблемы попробуйте:
* обновить видеодрайвер перед полным обновлением системы:
pacman -S nvidia-legacy
pacman -Syu
или, если это не работает:
* Удалить существующий видеодрайвер, обновиться, потом переустановить драйвер:
$ pacman -Rd nvidia-legacy
$ pacman -Syu
$ pacman -S nvidia-legacy
:: nvidia-legacy conflicts with libgl-dri. Remove libgl-dri? [Y/n] Y
НЕработающее колесо мыши
Протокол "Auto" не работает правильно в Xorg 7. В секции InputDevice для мыши, измените:
Option         "Protocol" "auto"
на
Option         "Protocol" "IMPS/2"
или
Option         "Protocol" "ExplorerPS/2"
Дополнительные кнопки на мыши перестали работать
Пользователи USB мышей должны прочитать Get All Mouse Buttons Working.
Пользователи Intellimouse (ExplorerPS/2) могут столкнуться с неработающим скроллом и боковыми кнопками. Раньше была запись в xorg.conf:
Option      "Buttons" "7"
Option      "ZAxisMapping" "6 7"
и пользователи также запускали xmodmap, чтобы боковые кнопки работали, командой типа:
xmodmap -e "pointer = 1 2 3 6 7 4 5"
Теперь xmodmap не нужен. Вместо этого исправьте xorg.conf так:
Option      "Buttons" "5"
Option      "ZAxisMapping" "4 5"
Option      "ButtonMapping" "1 2 3 6 7"
и боковые кнопки 7-кнопочной Intellimouse будут работать, как и прежде, без запуска xmodmap.
Проблемы с клавиатурой
Некоторые раскладки клавиатуры изменились. Стало невозможным:
* использовать Ctrl+Alt+Fx для переключения между консолями
* переключаться по раскладкам
* использовать знак ? для локали gb
Проблема заключается в том, что некоторые раскладки (например, sk_qwerty, uk) перестали существовать. Следует заменить
Option         "XkbLayout" "us,sk_qwerty"
на
Option         "XkbLayout" "us,sk"
Option         "XkbVariant" ",qwerty"
Также обратите внимание на следующие строки:
Option "XkbRules"   "xfree86"    #должно быть "xorg"
Option "XkbVariant" "nodeadkeys" #эта строчка может вызывать описанные выше проблемы, попробуйте её закомментировать.
AltGR (Compose клавиша) не работает правильно
Если после обновления вы не можете использовать клавишу altGr, как раньше её использовали, попробуйте добавить эту строку в раздел клавиатуры:
Option      "XkbOptions" "compose:ralt"
Это не совсем правильный вариант активирования клавиши AltGr на немецкой клавиатуре (например, чтобы использовать знаки '|' и '@'). Просто выберите верный keyboard variant, чтобы клавиша снова заработала, например (для немецкой клавиатуры):
Option      "XkbLayout" "de"
Option      "XkbVariant" "nodeadkeys"
Вышеуказанные решения не работают, если у вас итальянская клавиатура. Для того чтобы активировать клавишу AltGr на итальянской клавиатуре, проверьте правильность следующих строк:
 Driver          "kbd"
 Option          "XkbRules"      "xorg"
 Option          "XkbVariant"    ""
Невозможно установить раскладку командой setxkbmap
После обновления некоторые qwerty раскладки были удалены, например sk_qwerty. Если вы хотите переключить имеющуюся раскладку на другую qwerty, используйте следующую команду:
setxkbmap NAME_OF_THE_LAYOUT qwerty
например, для sk_qwerty вводите:
setxkbmap sk qwerty
Может так получиться, что после обновления и вышеприведённой команды будет сообщение: "Error loading new keyboard description". Оказывается, xserver не имеет прав записи, исполнения и чтения в /var/tmp Просто дайте права на эту директорию и перезапустите xserver!
Настройка франко-канадской раскладки (бывшая ca_enhanced)
В Xorg7 "ca_enhanced" более не существует. Для получения той раскладки, которая была, придётся использовать маленький трюк. Измените
       Option          "XkbLayout"     "ca_enhanced"
на
       Option          "XkbLayout"     "ca"
       Option          "XkbVariant"    "fr"
То же самое, видимо, и с другими подобными раскладками. Вы можете обратиться к Gentoo HowTo по этому вопросу: http://www.gentoo.org/proj/en/desktop/x/x11/modular-x-howto.xml
Отсутствующие библиотеки
* Помогите! Постоянно вываливается окно с сообщением об ошибке запуска моей любимой программы: "libXчто-то" не существует!
В большинстве случаев всё, что вам нужно сделать, - это взять имя библиотеки (например,libXau.so.1), перевести название в нижний регистр и установить её:
pacman -S libxau
Некоторые пакеты не собираются, жалуясь на отсутствующие X11 includes
Просто переустановите пакеты xproto и libx11, даже если они уже установлены.
Невозможно загрузить шрифт '(null)'
* Некоторые программы не работают и говорят, что не могут загрузить шрифт `(null)'.
Эти пакеты хотят каких-то дополнительных шрифтов. Некоторые программы работают только с bitmap шрифтами. Доступны два больших пакета, содержащих bitmap шрифты, xorg-fonts-75dpi и xorg-fonts-100dpi. Вам не нужны оба, достаточно и одного. Чтобы найти, какой вам подходит больше, попробуйте команду:
xdpyinfo | grep resolution
и выберите, что ближе (75 или 100 вместо XX)
pacman -S xorg-fonts-XXdpi
Иконки KDE в панели задач и на Десктопе не работают
* Панель задач KDEне работает и исчезли иконки на рабочем столе
Установите пакеты libxcomposite и libxss:
pacman -S libxcomposite libxss
Обновление с testing до current (отсутствующие файлы)
Если вы обновились с Xorg 7 из testing до Xorg 7 из current и обнаружили, что много файлов отсутствуют (включая startx, /usr/share/X11/rgb.txt и другие), потеря могла произойти из-за того, что пакет xorg-clients был разбит на много мелких пакетов.
Вам необходимо переустановить пакеты, которые являются зависимостями xorg-clients:
pacman -S xorg-apps xorg-font-utils xorg-res-utils xorg-server-utils \
          xorg-twm xorg-utils xorg-xauth xorg-xdm xorg-xfs xorg-xfwp \
          xorg-xinit xorg-xkb-utils xorg-xsm
Это должно разрешить проблему.
Проблемы с MIME типами в различных DE
Если вы заметили недостающие иконки и вы не можете открывать файлы по щелчку мыши в вашем DE, добавьте следующие строчки в /etc/profile или предпочитаемый скрипт загрузки и перезагрузитесь.
XDG_DATA_DIRS=$XDG_DATA_DIRS:/usr/share
export XDG_DATA_DIRS
DRI перестало работать с картами Matrox
Если вы используете карту Matrox и DRI не работает после обновления до xorg7, попробуйте добавить строку
Option "OldDmaInit" "On"
в секцию Device, описывающую видеокарту в xorg.conf.
Не выставляется нужное разрешение экрана
Если Xorg запускается разрешением экрана, не соответствующим максимально возможному для вашего монитора - попробуйте расширить диапазон частот VertRefresh в секции Monitor. Некоторые мониторы не могут воспроизводить картинку своего максимального разрешения на максимальной частоте.
    
    
    
    
    
    
    
