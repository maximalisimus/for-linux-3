


Резервные копии и восстановление
Поскольку MBR расположен на диске, то он может быть сохранен и, в случае необходимости, восстановлен.

Для создания резервной копии MBR:

dd if=/dev/sda of=/path/mbr-backup bs=512 count=1
Восстановление MBR:

dd if=/path/mbr-backup of=/dev/sda bs=512 count=1
Если нужно сохранить только загрузочный код (он занимает 446 байт), то меняем размер блока следующим образом:

dd if=/dev/sda of=/path/mbr-boot-code bs=446 count=1
Для сохранения только таблицы разделов (66 байт) нужно выполнить такую команду:

dd if=/dev/sda of=/path/mbr-part-table bs=1 count=66 skip=446
Соответственно, для восстановления только загрузочного кода из файла mbr-backup:

dd if=/path/mbr-backup of=/dev/sda bs=446 count=1
...таблицы разделов:

dd if=/path/mbr-backup of=/dev/sda bs=1 skip=446 seek=466 count=66
Важно: Восстановление MBR на несоответствующую таблицу разделов сделает все ваши данные нечитабельными, вернуть их будет практически невозможно. Если вам нужно просто переустановить загрузчик, почитайте GRUB or LILO.
Чтобы очистить MBR, но оставить таблицу разделов (может быть полезно, если вы хотите полностью переустановить операционную систему):

dd if=/dev/zero of=/dev/sda bs=446 count=1


